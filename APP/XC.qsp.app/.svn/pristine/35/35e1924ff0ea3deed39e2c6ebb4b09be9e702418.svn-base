require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([11],{75:function(t,e,s){"use strict";var a=n(s(1)),i=n(s(76));function n(t){return t&&t.__esModule?t:{default:t}}new a.default(i.default).$mount()},76:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(78),i=s.n(a),n=s(79),o=!1;var c=function(t){o||s(77)},r=s(0)(i.a,n.a,c,"data-v-33a1abee",null);r.options.__file="F:\\施工管理平台\\20181026\\XC-XCGL1\\pages\\index\\site\\Measuring.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] Measuring.vue: functional components are not supported with templates, they should use render functions."),e.default=r.exports},77:function(t,e){},78:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a,i=s(3),n=(a=i)&&a.__esModule?a:{default:a};e.default={onLoad:function(){this.testToken=n.default.net.GetLocalToken(),this.getProject()},onShow:function(){if(console.log("页面显示"),1!=this.isfirstopen){var e=t.getStorageSync("selectID"),s=t.getStorageSync("selectName");this.rectpeople=s,this.rectpeopleid=e}},data:function(){return{testToken:"",projectName:"",projectNum:"",checkPer:"",checkDate:"请选择检查日期",areaVal:"",areaList:[],areaIndex:0,areaText:"",ConstructVal:"",ConstructList:[],ConstructIndex:0,ConstructText:"",engProjectVal:"",engProjectList:[],engProjectIndex:0,engProjectText:"",isAdd:!0,dataList:[],projectList:[],projectText:"请获取项目",projectIndex:0,projectVal:"",rectpeople:"整改人",rectpeopleid:"",isfirstopen:1}},methods:{getArea:function(){var e=this;console.log(this.testToken);var s=n.default.net.setUrl("api/DropDownListApi/GetActualQuaAreaList");""!=this.projectVal&&this.projectVal,t.request({url:s,method:"POST",header:{token:this.testToken},success:function(t){console.log(t);var s=t.data;(s.status=1)?(console.log("检查区域获取成功"),e.areaList=e.setData(s.data),e.areaVal=e.areaList[e.areaIndex].value,e.areaText=e.areaList[e.areaIndex].text):console.log("检查区域获取失败"+s.status)},fail:function(t,e){console.log("检查区域数据请求失败"+t+e)}})},getConstruction:function(){var e=this,s=n.default.net.setUrl("api/DropDownListApi/GetActualQuaComList"),a={};""!=this.projectVal&&(a.projectid=this.projectVal),t.request({url:s,method:"POST",header:{token:this.testToken},data:JSON.stringify(a),success:function(t){console.log(t);var s=t.data;(s.status=1)?(console.log("构件类型获取成功"),e.ConstructList=e.setData(s.data),e.ConstructVal=e.ConstructList[e.ConstructIndex].value,e.ConstructText=e.ConstructList[e.ConstructIndex].text,e.GetActualQuaTermList()):console.log("构件类型获取失败"+s.status)},fail:function(t,e){console.log("构件类型数据请求失败"+t+e)}})},GetActualQuaTermList:function(){var e=this,s=n.default.net.setUrl("api/DropDownListApi/GetActualQuaTermList"),a={comid:this.ConstructVal};t.request({url:s,method:"POST",header:{Token:this.testToken},data:JSON.stringify(a),success:function(t){var s=t.data;(s.status=1)?(console.log("主控项目获取成功"),e.engProjectList=e.setData(s.data),e.engProjectVal=e.engProjectList[e.engProjectIndex].value,e.engProjectText=e.engProjectList[e.engProjectIndex].text):console.log("主控项目获取失败"+s.status)},fail:function(){},complete:function(){}})},getProject:function(){var e=this,s=n.default.net.setUrl("api/DropDownListApi/GetProject");t.request({url:s,method:"GET",header:{token:this.testToken},data:{},success:function(t){var s=t.data,a=s.data;if(s.status=1){a.unshift({value:"08876894",text:"请选择项目"}),e.projectList=e.setData(a),e.projectVal=e.projectList[e.projectIndex].value,e.projectText=e.projectList[e.projectIndex].text,"08876894"!=e.projectVal&&(e.getArea(),e.getConstruction())}else console.log("项目获取失败"+s.status)},fail:function(t,e){console.log("项目数据请求失败"+t+e)},complete:function(){}})},setData:function(t){var e=[];return t.forEach(function(t){e.push({text:t.text,value:t.value})}),e},changeArea:function(t){this.areaIndex=t.detail.value,this.areaText=this.areaList[this.areaIndex].text,this.areaVal=this.areaList[this.areaIndex].value},changeConstruct:function(t){this.ConstructIndex=t.detail.value,this.ConstructVal=this.ConstructList[this.ConstructIndex].value,this.ConstructText=this.ConstructList[this.ConstructIndex].text,this.GetActualQuaTermList()},changeProject:function(t){this.projectIndex=t.detail.value,this.projectVal=this.projectList[t.detail.value].value,this.projectText=this.projectList[this.projectIndex].text,this.getArea(),this.getConstruction()},changeEngproject:function(t){this.engProjectIndex=t.detail.value,this.engProjectVal=this.engProjectList[this.engProjectIndex].value,this.engProjectText=this.engProjectList[this.engProjectIndex].text},changeCheckDate:function(t){this.checkDate=t.detail.value},selectRect:function(e){this.isfirstopen+=1,t.navigateTo({url:"../../../components/selectPeople"})},addDatas:function(){var e=this.dataList.length+1;if(!(e<11))return t.showToast({title:"最多添加10条"}),!1;this.dataList.push({dataNum:e}),e+=1},submit:function(){t.removeStorageSync("selectID"),t.removeStorageSync("selectName");var e=n.default.net.setUrl("api/ActualQuantityApi/Add"),s=[];for(var a in this.dataList)s.push(this.dataList[a].dataInput);console.log(s);var i={ProjectID:this.projectVal,CheckPeople:n.default.net.GetUser().ID,AccCheckProple:this.rectpeopleid,CheckDate:this.checkDate,Children:[{ActualQuantityAreaID:this.areaVal,DataAttr:s,Remark:"111",ComId:this.ConstructVal,ActualQuantityTermID:this.engProjectVal}]};t.request({url:e,method:"POST",header:{Token:this.testToken},data:JSON.stringify(i),success:function(e){console.log(e);var s=e.data;s.data;1==s.status?(t.showToast({title:"提交成功",mask:!1,duration:1500}),setTimeout(function(){t.navigateBack({delta:1})},2e3)):console.log(s.message)},fail:function(){console.log("实测实量提交失败")},complete:function(){}})}}}}).call(e,s(2).default)},79:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"content"},[s("view",{staticClass:"input-row"},[t._m(0),t._v(" "),s("picker",{attrs:{value:t.projectIndex,range:t.projectList,"range-key":"text",eventid:"bNQ-0"},on:{change:t.changeProject}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.projectText))])])],1),t._v(" "),s("view",{staticClass:"input-row"},[t._m(1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.projectNum,expression:"projectNum"}],attrs:{type:"text",value:"",placeholder:"请填写项目编号",eventid:"mHc-1"},domProps:{value:t.projectNum},on:{input:function(e){e.target.composing||(t.projectNum=e.target.value)}}})]),t._v(" "),s("view",{staticClass:"input-row"},[t._m(2),t._v(" "),s("input",{attrs:{type:"text",value:t.rectpeople,placeholder:"",eventid:"fMN-2"},on:{tap:t.selectRect}})]),t._v(" "),s("view",{staticClass:"input-row"},[t._m(3),t._v(" "),s("picker",{attrs:{mode:"date",value:t.checkDate,start:"2018-09-26",end:"2028-12-31",eventid:"BmX-3"},on:{change:t.changeCheckDate}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.checkDate))])])],1),t._v(" "),s("view",{staticClass:"input-row"},[t._m(4),t._v(" "),s("picker",{attrs:{value:t.areaIndex,range:t.areaList,"range-key":"text",eventid:"iA9-4"},on:{change:t.changeArea}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.areaText))])])],1),t._v(" "),s("view",{staticClass:"input-row"},[t._m(5),t._v(" "),s("picker",{attrs:{value:t.ConstructIndex,range:t.ConstructList,"range-key":"text",eventid:"LFu-5"},on:{change:t.changeConstruct}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.ConstructText))])])],1),t._v(" "),s("view",{staticClass:"input-row"},[t._m(6),t._v(" "),s("picker",{attrs:{value:t.engProjectIndex,range:t.engProjectList,"range-key":"text",eventid:"lig-6"},on:{change:t.changeEngproject}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.engProjectText))])])],1),t._v(" "),s("view",{staticClass:"input-row"},[t._m(7),t._v(" "),s("view",{staticClass:"data-row"},[s("button",{attrs:{size:"mini",type:"default",eventid:"p0Q-7"},on:{tap:t.addDatas}},[t._v("添加数据")])],1)]),t._v(" "),t._l(t.dataList,function(e,a){return t.isAdd?s("block",{key:a},[t.isAdd?s("view",{staticClass:"input-row"},[s("view",{staticClass:"input-label"},[t._v("\n\t\t\t\t数据:"+t._s(e.dataNum)+"\n\t\t\t")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.dataInput,expression:"item.dataInput"}],attrs:{type:"text",placeholder:"请输入测量数据",eventid:"VFD-8-"+a},domProps:{value:e.dataInput},on:{input:function(t){t.target.composing||(e.dataInput=t.target.value)}}})]):t._e()]):t._e()}),t._v(" "),s("view",{staticClass:"button-row"},[s("button",{attrs:{type:"primary",size:"mini",eventid:"I2q-9"},on:{tap:t.submit}},[t._v("提交")])],1)],2)};a._withStripped=!0;var i={render:a,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"http://xcbucket.oss-cn-beijing.aliyuncs.com/%E6%98%9F%E5%B1%82%E7%8E%B0%E5%9C%BA%E7%AE%A1%E7%90%86APP/img/Site/hnt/list1_icon2-03.png",mode:""}}),this._v(" "),e("text",[this._v("项目名称:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),this._v(" "),e("text",[this._v("项目编号:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),this._v(" "),e("text",[this._v("陪同检查人:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-13.png",mode:""}}),this._v(" "),e("text",[this._v("检查日期:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),this._v(" "),e("text",[this._v("测量区域:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),this._v(" "),e("text",[this._v("构件类别:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),this._v(" "),e("text",[this._v("主控项目:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-13.png",mode:""}}),this._v(" "),e("text",[this._v("测量数据:")])])}]};e.a=i}},[75]);
//# sourceMappingURL=../../../.sourcemap/pages/index/site/Measuring.js.map
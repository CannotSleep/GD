require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([22],{20:function(t,e,a){"use strict";var i=n(a(1)),s=n(a(21));function n(t){return t&&t.__esModule?t:{default:t}}new i.default(s.default).$mount()},21:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(23),s=a.n(i),n=a(24),o=!1;var c=function(t){o||a(22)},r=a(0)(s.a,n.a,c,"data-v-1d23ac9b",null);r.options.__file="F:\\施工管理平台\\20181026\\XC-XCGL1\\pages\\index\\quality\\safetyCheck.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] safetyCheck.vue: functional components are not supported with templates, they should use render functions."),e.default=r.exports},22:function(t,e){},23:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i,s=a(3),n=(i=s)&&i.__esModule?i:{default:i};e.default={data:function(){return{testToken:"",title:"picker",companyList:["请选择分公司"],companyIndex:0,companyText:"1",companyVal:"1",dong:"",ceng:"",projectList:["请选择项目"],projectIndex:1,projectText:"",projectVal:"",areaList:["请选择区域"],areaVal:"",areaIndex:0,areaText:"",unitList:["请选择施工单位"],unitVal:"",unitIndex:0,unitText:"",rectification:"",dangerList:["请选择隐患类型"],dangerVal:"",dangerIndex:0,dangerText:"",dangerDesList:["请选择隐患描述"],dangerDesVal:"",dangerDesText:"请选择隐患描述",dangerDesIndex:0,rectiList:["请选择整改人"],rectpeople:"整改人",rectpeopleid:"",noticeList:["请选择通知人"],noticepeople:"通知人",noticepeopleid:"",degreeList:["一般","紧急","严重"],degreeVal:0,checkDate:"2018-09-18",recheckDate:"2018-10-18",deadline:"2018-09-21",time:"12:01",imageList:[],sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:8,count:[1,2,3,4,5,6,7,8,9],isfirstopen:1}},onLoad:function(e){switch(e.type){case"safety":t.setNavigationBarTitle({title:"安全隐患检查"});break;case"quality":t.setNavigationBarTitle({title:"质量隐患检查"})}this.testToken=n.default.net.GetLocalToken(),this.getCompany(),this.getArea(),this.getUnit(),this.getDanger(),console.log(n.default.net.GetUser())},onShow:function(){if(console.log("页面显示"),1!=this.isfirstopen){var e=t.getStorageSync("selectID"),a=t.getStorageSync("selectName");this.rectpeople=a,this.rectpeopleid=e;var i=t.getStorageSync("selectIDs"),s=t.getStorageSync("selectNames");this.noticepeople=s,this.noticepeopleid=i}},onHide:function(){},onUnload:function(){},methods:{submit:function(e){t.removeStorageSync("selectID"),t.removeStorageSync("selectName"),t.removeStorageSync("selectIDs"),t.removeStorageSync("selectNames");var a=n.default.net.setUrl("api/SecurityInspectApi/AddOrUpdate?notifier="+this.noticepeopleid),i={Title:this.title,RectPeople:this.rectpeopleid,ProjectId:this.projectVal,SubcontractingUnit:this.unitVal,Building:this.dong,Floor:this.ceng,SaftyDangerID:this.dangerVal,SaftyDanger:this.dangerText,DangerDesID:this.dangerDesVal,DangerDes:this.dangerDesText,Rectification:this.rectification,ExpirDate:this.deadline,CrashLevel:this.degreeVal,AddPeopleID:n.default.net.GetUser().ID,CheckDate:this.checkDate};t.request({url:a,method:"POST",header:{Token:this.testToken},data:JSON.stringify(i),success:function(e){var a=e.data;a.data;1==a.status?(t.showToast({title:"提交成功",mask:!1,duration:1500}),setTimeout(function(){t.navigateBack({delta:1})},2e3)):console.log(a.message)},fail:function(){console.log("提交失败")},complete:function(){}})},getCompany:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetCompany");t.request({url:a,dataType:"json",type:"GET",header:{token:this.testToken},success:function(a){var i=a.data,s=i.data;if(i.status=1){console.log("公司获取成功");s.unshift({value:"08876894",text:"请选择公司"}),e.companyList=e.setData(s),e.companyVal=e.companyList[e.companyIndex].value,e.companyText=e.companyList[e.companyIndex].text,"08876894"!=e.companyVal&&e.getProject()}else console.log(i.status),t.showToast({title:i.status,mask:!1,duration:1500})},fail:function(t,e){console.log("公司获取失败"+t+e)}})},getProject:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetProject");t.request({url:a,method:"GET",header:{token:this.testToken},data:{company:this.companyVal},success:function(t){var a=t.data,i=a.data;console.log(t),(a.status=1)?(e.projectList=e.setData(i),e.projectVal=e.projectList[e.projectIndex].value,e.projectText=e.projectList[e.projectIndex].text):console.log("项目获取失败"+a.status)},fail:function(t,e){console.log("项目数据请求失败"+t+e)}})},getArea:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetUtilitySettings");t.request({url:a,method:"POST",header:{token:this.testToken},data:JSON.stringify({type:0}),success:function(t){var a=t.data;(a.status=1)?(console.log("检查区域获取成功"),e.areaList=e.setData(a.data),e.areaVal=e.areaList[e.areaIndex].value,e.areaText=e.areaList[e.areaIndex].text):console.log("检查区域获取失败"+a.status)},fail:function(t,e){console.log("检查区域数据请求失败"+t+e)}})},getUnit:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetUtilitySettings");t.request({url:a,method:"POST",header:{token:this.testToken},data:JSON.stringify({type:1}),success:function(t){var a=t.data;(a.status=1)?(console.log("施工单位获取成功"),e.unitList=e.setData(a.data),e.unitVal=e.unitList[e.unitIndex].value,e.unitText=e.unitList[e.unitIndex].text):console.log("施工单位获取失败"+a.status)},fail:function(t,e){console.log("施工单位数据请求失败"+t+e)}})},getDanger:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetQualityDangerType");t.request({url:a,method:"POST",header:{token:this.testToken},data:JSON.stringify({type:2}),success:function(t){var a=t.data,i=a.data;if(a.status=1){i.unshift({value:"088",text:"请选择隐患类型"}),e.dangerList=e.setData(i),e.dangerVal=e.dangerList[e.dangerIndex].value,e.dangerText=e.dangerList[e.dangerIndex].text,"088"!=e.dangerVal&&e.getDangerDes()}else console.log("隐患类型获取失败"+a.status)},fail:function(t,e){console.log("施工单位数据请求失败"+t+e)}})},getDangerDes:function(){var e=this;console.log(this.dangerVal);var a=n.default.net.setUrl("api/DropDownListApi/GetQualityDangerDes"),i={size:"9999",page:"1",type:"2",comid:this.dangerVal};t.request({url:a,method:"POST",header:{token:this.testToken},data:JSON.stringify(i),success:function(t){var a=t.data,i=a.data;if(a.status=1){i.unshift({value:"088",text:"请选择隐患描述"}),e.dangerDesList=e.setData(a.data),e.dangerDesVal=e.dangerDesList[e.dangerDesIndex].value,e.dangerDesText=e.dangerDesList[e.dangerDesIndex].text}else console.log("隐患描述获取失败"+a.status)},fail:function(t,e){console.log("隐患描述获取失败"+t+e)}})},setData:function(t){var e=[];return null!=t&&0!=t.length&&t.forEach(function(t){e.push({text:t.text,value:t.value})}),e},changeCompany:function(t){this.companyIndex=t.detail.value,this.companyVal=this.companyList[t.detail.value].value,this.companyText=this.companyList[this.companyIndex].text,this.getProject()},changeProject:function(t){this.projectIndex=t.detail.value,this.projectVal=this.projectList[t.detail.value].value,this.projectText=this.projectList[this.projectIndex].text},changeArea:function(t){this.areaIndex=t.detail.value,this.areaText=this.areaList[this.areaIndex].text,this.areaVal=this.areaList[this.areaIndex].value},changeUnit:function(t){this.unitIndex=t.detail.value,this.unitText=this.unitList[this.unitIndex].text,this.unitVal=this.unitList[this.unitIndex].value},changeDanger:function(t){this.dangerIndex=t.detail.value,this.dangerVal=this.dangerList[this.dangerIndex].value,this.dangerText=this.dangerList[this.dangerIndex].text,this.getDangerDes()},changeDangerDes:function(t){this.dangerDesIndex=t.detail.value,this.dangerDesVal=this.dangerDesList[this.dangerDesIndex].value,this.dangerDesText=this.dangerDesList[this.dangerDesIndex].text},selectRect:function(e){this.isfirstopen+=1,t.navigateTo({url:"../../../components/selectPeople"})},selectNotice:function(){this.isfirstopen+=1,t.navigateTo({url:"../../../components/selectPeopleMulti"})},nameInput:function(t){this.title=t.detail.value},dongInput:function(t){this.dong=t.detail.value},cengInput:function(t){this.ceng=t.detail.value},recInput:function(t){this.rectification=t.detail.value}}}}).call(e,a(2).default)},24:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"content"},[a("form",{staticClass:"input-form",attrs:{action:"",eventid:"Zwj-14"},on:{submit:t.safetySubmit,reset:t.formReset}},[a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),t._v(" "),a("text",[t._v("所属公司:")])]),t._v(" "),a("picker",{attrs:{value:t.companyIndex,range:t.companyList,"range-key":"text",eventid:"5ch-0"},on:{change:t.changeCompany}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.companyText))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-02.png",mode:""}}),t._v(" "),a("text",[t._v("项目名称:")])]),t._v(" "),a("picker",{attrs:{value:t.projectIndex,range:t.projectList,"range-key":"text",eventid:"P34-1"},on:{change:t.changeProject}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.projectText))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-03.png",mode:""}}),t._v(" "),a("text",[t._v("任务名称:")])]),t._v(" "),a("input",{attrs:{type:"text",value:"",placeholder:"请填写任务名称",eventid:"UfS-2"},on:{input:t.nameInput}})]),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-04.png",mode:""}}),t._v(" "),a("text",[t._v("检查楼栋:")])]),t._v(" "),a("input",{attrs:{type:"text",value:"",placeholder:"请填写检查楼栋号",eventid:"Ap1-3"},on:{input:t.dongInput}})]),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-05.png",mode:""}}),t._v(" "),a("text",[t._v("检查楼层:")])]),t._v(" "),a("input",{attrs:{type:"text",value:"",placeholder:"请填写检查楼层号",eventid:"47q-4"},on:{input:t.cengInput}})]),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-06.png",mode:""}}),t._v(" "),a("text",[t._v("检查区域:")])]),t._v(" "),a("picker",{attrs:{value:t.areaIndex,range:t.areaList,"range-key":"text",eventid:"051-5"},on:{change:t.changeArea}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.areaText))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-07.png",mode:""}}),t._v(" "),a("text",[t._v("施工单位:")])]),t._v(" "),a("picker",{attrs:{value:t.unitIndex,range:t.unitList,"range-key":"text",eventid:"9Gv-6"},on:{change:t.changeUnit}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.unitText))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-08.png",mode:""}}),t._v(" "),a("text",[t._v("隐患类型:")])]),t._v(" "),a("picker",{attrs:{value:t.dangerIndex,range:t.dangerList,"range-key":"text",eventid:"eaS-7"},on:{change:t.changeDanger}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.dangerText))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-09.png",mode:""}}),t._v(" "),a("text",[t._v("隐患描述:")])]),t._v(" "),a("picker",{attrs:{value:t.dangerDesVal,range:t.dangerDesList,"range-key":"text",eventid:"IyN-8"},on:{change:t.changeDangerDes}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.dangerDesText))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-11.png",mode:""}}),t._v(" "),a("text",[t._v("整改人:")])]),t._v(" "),a("input",{attrs:{type:"text",value:t.rectpeople,placeholder:"",eventid:"wzN-9"},on:{tap:t.selectRect}})]),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-12.png",mode:""}}),t._v(" "),a("text",[t._v("通知人:")])]),t._v(" "),a("input",{attrs:{type:"text",value:t.noticepeople,placeholder:"",eventid:"LOn-10"},on:{tap:t.selectNotice}})]),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-13.png",mode:""}}),t._v(" "),a("text",[t._v("整改期限:")])]),t._v(" "),a("picker",{attrs:{mode:"date",value:t.deadline,start:"2018-09-18",end:"2028-12-31"}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.deadline))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-05.png",mode:""}}),t._v(" "),a("text",[t._v("整改要求:")])]),t._v(" "),a("input",{attrs:{type:"text",value:"",placeholder:"请填写整改要求",eventid:"49r-11"},on:{input:t.recInput}})]),t._v(" "),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-14.png",mode:""}}),t._v(" "),a("text",[t._v("检查日期:")])]),t._v(" "),a("picker",{attrs:{mode:"date",value:t.checkDate,start:"2018-09-18",end:"2028-12-31"}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.checkDate))])])],1),t._v(" "),a("view",{staticClass:"input-row mt-10"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-15.png",mode:""}}),t._v(" "),a("text",[t._v("严重程度:")])]),t._v(" "),a("picker",{attrs:{value:t.degreeVal,range:t.degreeList,eventid:"Tea-12"},on:{change:t.changeDegree}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.degreeList[t.degreeVal]))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[a("button",{staticClass:"search-btn",attrs:{size:"mini",eventid:"81L-13"},on:{tap:t.submit}},[t._v("提交")])],1)])],1)};i._withStripped=!0;var s={render:i,staticRenderFns:[]};e.a=s}},[20]);
//# sourceMappingURL=../../../.sourcemap/pages/index/quality/safetyCheck.js.map
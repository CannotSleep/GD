require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([25],{113:function(t,e,a){"use strict";var s=n(a(1)),i=n(a(114));function n(t){return t&&t.__esModule?t:{default:t}}new s.default(i.default).$mount()},114:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(116),i=a.n(s),n=a(117),o=!1;var l=function(t){o||a(115)},c=a(0)(i.a,n.a,l,null,null);c.options.__file="F:\\施工管理平台\\20181101\\XC.qsp.app\\pages\\index\\schedule\\scheduleList.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] scheduleList.vue: functional components are not supported with templates, they should use render functions."),e.default=c.exports},115:function(t,e){},116:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s,i=a(3),n=(s=i)&&s.__esModule?s:{default:s};e.default={onLoad:function(e){var a=e.state;switch(console.log(a),this.Notify=e.notify,a){case"month":t.setNavigationBarTitle({title:"月进度计划"});break;case"season":t.setNavigationBarTitle({title:"季度进度计划"}),this.month=!1,this.season=!0,this.planType="季度";break;case"all":t.setNavigationBarTitle({title:"进度计划"})}this.Notify&&(this.searchData(),console.log(this.Notify)),this.getCompany()},data:function(){return{planType:"月份",companyList:[],companyVal:"",companyIndex:0,companyText:"",projectList:[],projectIndex:0,projectVal:"",projectText:"",yearIndex:0,yearList:[{text:"请选择",value:0},{text:"2017年",value:2017},{text:"2018年",value:2018},{text:"2019年",value:2019},{text:"2020年",value:2020},{text:"2021年",value:2021},{text:"2022年",value:2022}],yearVal:"",monthList:[{text:"请选择",value:0},{value:1,text:"1月"},{value:2,text:"2月"},{value:3,text:"3月"},{value:4,text:"4月"},{value:5,text:"5月"},{value:6,text:"6月"},{value:7,text:"7月"},{value:8,text:"8月"},{value:9,text:"9月"},{value:10,text:"10月"},{value:11,text:"11月"},{value:12,text:"12月"}],monthIndex:0,monthVal:"",monthText:"",seasonList:[{text:"请选择",value:0},{value:1,text:"第一季度"},{value:2,text:"第二季度"},{value:3,text:"第三季度"},{value:4,text:"第四季度"}],seasonVal:"",seasonIndex:0,scheduleList:[],month:!0,season:!1,year:!0,Name:"",StartDate:"",EndDate:"",ProjectName:"",Notify:"",page:1,existNewList:!0}},onReachBottom:function(){this.page+=1,this.existNewList&&this.pullupRefresh()},methods:{openViews:function(e){t.navigateTo({url:e})},getCompany:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetCompany");t.request({url:a,dataType:"json",type:"GET",header:{Token:n.default.net.GetSessionToken()},success:function(a){n.default.net.showWrongTipsEx(a);var s=a.data,i=s.data;if(1==s.status){i.unshift({value:"",text:"请选择公司"}),console.log("公司获取成功"),e.companyList=e.setData(i),e.companyVal=e.companyList[e.companyIndex].value,e.companyText=e.companyList[e.companyIndex].text}else console.log(s.status),t.showToast({title:s.status,mask:!1,duration:1500})},fail:function(t,e){console.log("公司获取失败"+t+e)}})},getProject:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetProject");t.request({url:a,method:"GET",header:{Token:n.default.net.GetSessionToken()},data:{company:this.companyVal},success:function(t){n.default.net.showWrongTipsEx(t);var a=t.data,s=a.data;if(1==a.status){s.unshift({value:"",text:"请选择项目"}),e.projectList=e.setData(s),e.projectVal=e.projectList[e.projectIndex].value,e.projectText=e.projectList[e.projectIndex].text}else console.log("项目获取失败"+a.status)},fail:function(t,e){console.log("项目数据请求失败"+t+e)},complete:function(){}})},searchData:function(){this.page=1,this.scheduleList=[],this.existNewList=!0,this.getListData()},pullupRefresh:function(){this.getListData()},getListData:function(){var e=this,a=n.default.net.setUrl("api/ScheduleApi/GetList?page="+this.page),s={};this.yearVal=this.yearList[this.yearIndex].value,this.monthVal=this.monthList[this.monthIndex].value,this.seasonVal=this.seasonList[this.seasonIndex].value,this.companyVal&&(s.CompanyID=this.companyVal),this.projectVal&&(s.ProjectID=this.projectVal),0!=this.yearVal&&(s.Year=this.yearVal),1==this.month?(0!=this.monthVal&&(s.Month=this.monthVal),s.Type=2):1==this.season&&(0!=this.seasonVal&&(s.Quarter=this.seasonVal),s.Type=1),this.Notify&&(s.NeedSub="true"),console.log(s),t.request({url:a,method:"POST",header:{Token:n.default.net.GetSessionToken()},data:JSON.stringify(s),success:function(a){n.default.net.showWrongTipsEx(a);var s=a.data,i=s.data;if(1==s.status)if(""!=i)for(var o in i)e.scheduleList.push({Name:i[o].Name,StartDate:i[o].StartDate.substring(0,10),EndDate:i[o].EndDate.substring(0,10),RealEndDate:i[o].RealEndDate.substring(0,10),ProjectName:i[o].ProjectName,ID:i[o].ID});else e.existNewList=!1,t.showToast({title:"暂无更多数据"})},fail:function(){},complete:function(){}})},setData:function(t){var e=[];return t.forEach(function(t){e.push({text:t.text,value:t.value})}),e},changeCompany:function(t){this.companyIndex=t.detail.value,this.companyVal=this.companyList[t.detail.value].value,this.companyText=this.companyList[this.companyIndex].text,this.getProject()},changeProject:function(t){this.projectIndex=t.detail.value,this.projectVal=this.projectList[t.detail.value].value,this.projectText=this.projectList[this.projectIndex].text},changeYears:function(t){this.yearIndex=t.detail.value,this.yearVal=this.yearList[this.yearIndex].value},changeMonth:function(t){this.monthIndex=t.detail.value,this.monthVal=this.monthList[this.monthIndex].value},changeSeason:function(t){this.seasonIndex=t.detail.value,this.seasonVal=this.seasonList[this.seasonIndex].value},goDetail:function(e){e.ID;t.navigateTo({url:"scheduleDetails?id="+e.ID+"&notify="+this.Notify})}}}}).call(e,a(2).default)},117:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"content"},[a("view",{staticClass:"input-row"},[t._m(0),a("picker",{attrs:{value:t.companyIndex,range:t.companyList,"range-key":"text",eventid:"ED2-0"},on:{change:t.changeCompany}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.companyText))])])],1),a("view",{staticClass:"input-row"},[t._m(1),a("picker",{attrs:{value:t.projectIndex,range:t.projectList,"range-key":"text",eventid:"yyM-1"},on:{change:t.changeProject}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.projectText))])])],1),a("view",{staticClass:"input-row"},[t._m(2),t.year?a("picker",{attrs:{mode:"selector",value:t.yearIndex,range:t.yearList,"range-key":"text",eventid:"wMQ-2"},on:{change:t.changeYears}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.yearList[t.yearIndex].text))])]):t._e()],1),a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[a("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-14.png",mode:""}}),a("text",[t._v(t._s(t.planType)+"选择:")])]),t.month?a("picker",{attrs:{mode:"selector",value:t.monthIndex,range:t.monthList,"range-key":"text",eventid:"mTV-3"},on:{change:t.changeMonth}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.monthList[t.monthIndex].text))])]):t._e(),t.season?a("picker",{attrs:{mode:"selector",value:t.seasonIndex,range:t.seasonList,"range-key":"text",eventid:"LNf-4"},on:{change:t.changeSeason}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.seasonList[t.seasonIndex].text))])]):t._e()],1),a("view",{staticClass:"button-row"},[a("button",{staticClass:"search-btn",attrs:{type:"",size:"mini",eventid:"FPJ-5"},on:{tap:t.searchData}},[t._v("查询")])],1),a("view",{staticClass:"list-content"},[a("view",{staticClass:"uni-list"},t._l(t.scheduleList,function(e,s){return a("block",{key:s},[a("view",{staticClass:"uni-list-cell",attrs:{"hover-class":"uni-list-cell-hover",eventid:"SWA-6-"+s},on:{tap:function(a){t.goDetail(e)}}},[a("view",{staticClass:"uni-triplex-row"},[a("view",{staticClass:"uni-triplex-left"},[a("text",{staticClass:"list-title uni-ellipsis"},[t._v(t._s(e.Name))]),a("text",{staticClass:"list-deadline"},[t._v("计划开始日期:"+t._s(e.StartDate))]),a("text",{staticClass:"list-deadline"},[t._v("计划完成日期:"+t._s(e.EndDate))]),a("text",{staticClass:"list-deadline"},[t._v("实际完成日期:"+t._s("0001-01-01"==e.RealEndDate?"":e.RealEndDate))]),a("text",{staticClass:"list-level"},[t._v("项目:"+t._s(e.ProjectName))])])])])])}))])])};s._withStripped=!0;var i={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),e("text",[this._v("所属公司:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-02.png",mode:""}}),e("text",[this._v("项目名称:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-14.png",mode:""}}),e("text",[this._v("年份选择:")])])}]};e.a=i}},[113]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/index/schedule/scheduleList.js.map
require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([21],{68:function(t,e,s){"use strict";var a=i(s(1)),n=i(s(69));function i(t){return t&&t.__esModule?t:{default:t}}new a.default(n.default).$mount()},69:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(71),n=s.n(a),i=s(72),o=!1;var c=function(t){o||s(70)},r=s(0)(n.a,i.a,c,"data-v-3defff01",null);r.options.__file="F:\\施工管理平台\\20181101\\XC.qsp.app\\pages\\index\\site\\ConcreteList.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] ConcreteList.vue: functional components are not supported with templates, they should use render functions."),e.default=r.exports},70:function(t,e){},71:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a,n=s(3),i=(a=n)&&a.__esModule?a:{default:a};e.default={onLoad:function(t){this.Token=i.default.net.GetSessionToken(),this.getCompany()},data:function(){return{Token:"",companyList:[],companyIndex:0,projectList:[],companyText:"",projectText:"",projectIndex:0,companyVal:"",projectVal:"",ConcreteList:[],page:1,existNewList:!0}},onReachBottom:function(){this.page+=1,this.existNewList&&this.pullupRefresh()},methods:{getCompany:function(){var e=this,s=i.default.net.setUrl("api/DropDownListApi/GetCompany");t.request({url:s,dataType:"json",type:"GET",header:{Token:this.Token},success:function(s){i.default.net.showWrongTipsEx(s);var a=s.data,n=a.data;if(1==a.status){n.unshift({value:"",text:"请选择公司"}),console.log("公司获取成功"),e.companyList=e.setData(n),e.companyVal=e.companyList[e.companyIndex].value,e.companyText=e.companyList[e.companyIndex].text,e.getProject()}else console.log(a.status),t.showToast({title:a.status,mask:!1,duration:1500})},fail:function(t,e){console.log("公司获取失败"+t+e)}})},getProject:function(){var e=this,s=i.default.net.setUrl("api/DropDownListApi/GetProject");t.request({url:s,method:"GET",header:{Token:this.Token},data:{company:this.companyVal},success:function(t){i.default.net.showWrongTipsEx(t);var s=t.data,a=s.data;if(1==s.status){a.unshift({value:"",text:"请选择项目"}),e.projectList=e.setData(a),e.projectVal=e.projectList[e.projectIndex].value,e.projectText=e.projectList[e.projectIndex].text}else console.log("项目获取失败"+s.status)},fail:function(t,e){console.log("项目数据请求失败"+t+e)},complete:function(){}})},setData:function(t){var e=[];return t.forEach(function(t){e.push({text:t.text,value:t.value})}),e},changeCompany:function(t){this.companyIndex=t.detail.value,this.companyVal=this.companyList[t.detail.value].value,this.companyText=this.companyList[this.companyIndex].text,this.getProject()},changeProject:function(t){this.projectIndex=t.detail.value,this.projectVal=this.projectList[t.detail.value].value,this.projectText=this.projectList[this.projectIndex].text},searchData:function(){var t=this.companyVal,e=this.projectVal;this.page=1,this.ConcreteList=[],this.existNewList=!0,this.getListData(t,e)},pullupRefresh:function(){var t=this.companyVal,e=this.projectVal;this.getListData(t,e)},getListData:function(e,s){var a=this,n=i.default.net.setUrl("api/QualityConcreteBackApi/GetList?page="+this.page),o={};e&&(o.CompanyId=e),s&&(o.ProjectId=s);var c=JSON.stringify(o);t.request({url:n,method:"POST",header:{Token:this.Token},data:c,success:function(t){i.default.net.showWrongTipsEx(t);var e=t.data;if(1==e.status){var s=e.data,n=[];""!=s?s.forEach(function(t){n.push({ConcreteDate:t.ConcreteDate.substring(0,10),ProjectName:t.ProjectName,ID:t.ID,Grade:t.Grade})}):(a.existNewList=!1,i.default.net.showWrongTips("暂无更多数据")),a.ConcreteList=a.ConcreteList.concat(n)}},fail:function(){},complete:function(){}})},goDetail:function(e){e.ID;t.navigateTo({url:"ConcreteDetails?id="+e.ID})}}}}).call(e,s(2).default)},72:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"content"},[s("view",{staticClass:"input-row"},[t._m(0),s("picker",{attrs:{value:t.companyIndex,range:t.companyList,"range-key":"text",eventid:"clP-0"},on:{change:t.changeCompany}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.companyText))])])],1),s("view",{staticClass:"input-row"},[t._m(1),s("picker",{attrs:{value:t.projectIndex,range:t.projectList,"range-key":"text",eventid:"aXw-1"},on:{change:t.changeProject}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.projectText))])])],1),s("view",{staticClass:"input-row"},[s("button",{staticClass:"search-btn",attrs:{type:"",size:"mini",eventid:"HA7-2"},on:{tap:t.searchData}},[t._v("查询")])],1),s("view",{staticClass:"list-content"},[s("view",{staticClass:"uni-list"},t._l(t.ConcreteList,function(e,a){return s("block",{key:a},[s("view",{staticClass:"uni-list-cell",attrs:{"hover-class":"uni-list-cell-hover",eventid:"1ap-3-"+a},on:{tap:function(s){t.goDetail(e)}}},[s("view",{staticClass:"uni-triplex-row"},[s("view",{staticClass:"uni-triplex-left"},[s("text",{staticClass:"list-title uni-ellipsis"},[t._v(t._s(e.ProjectName))]),s("label",[s("text",{staticClass:"list-deadline"},[t._v(t._s(e.ConcreteDate))]),s("text",{staticClass:"list-level"},[t._v(t._s(e.Grade))])])],1)])])])}))])])};a._withStripped=!0;var n={render:a,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),e("text",[this._v("所属公司:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-02.png",mode:""}}),e("text",[this._v("项目名称:")])])}]};e.a=n}},[68]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/index/site/ConcreteList.js.map
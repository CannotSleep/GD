require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([22],{20:function(t,e,i){"use strict";var a=n(i(1)),s=n(i(21));function n(t){return t&&t.__esModule?t:{default:t}}new a.default(s.default).$mount()},21:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(23),s=i.n(a),n=i(24),o=!1;var c=function(t){o||i(22)},l=i(0)(s.a,n.a,c,"data-v-08ece39c",null);l.options.__file="F:\\施工管理平台\\20181101\\XC.qsp.app\\pages\\index\\quality\\safetyCheck.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] safetyCheck.vue: functional components are not supported with templates, they should use render functions."),e.default=l.exports},22:function(t,e){},23:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a,s=i(3),n=(a=s)&&a.__esModule?a:{default:a};e.default={data:function(){return{Token:"",title:"picker",companyList:["请选择分公司"],companyIndex:0,companyText:"1",companyVal:"1",dong:"",ceng:"",projectList:["请选择项目"],projectIndex:1,projectText:"",projectVal:"",areaList:["请选择区域"],areaVal:"",areaIndex:0,areaText:"",unitList:["请选择施工单位"],unitVal:"",unitIndex:0,unitText:"",rectification:"",dangerList:["请选择隐患类型"],dangerVal:"",dangerIndex:0,dangerText:"",dangerDesList:["请选择隐患描述"],dangerDesVal:"",dangerDesText:"请选择隐患描述",dangerDesIndex:0,rectiList:["请选择整改人"],rectpeople:"整改人",rectpeopleid:"",noticeList:["请选择通知人"],noticepeople:"通知人",noticepeopleid:"",degreeList:["一般","紧急","严重"],degreeVal:0,checkDate:"2018-09-18",recheckDate:"2018-10-18",deadline:"2018-09-21",time:"12:01",sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:8,count:[1,2,3,4,5,6,7,8,9],isfirstopen:1,imageList:[1,1,1,1,1,1,1]}},onLoad:function(e){switch(e.type){case"safety":t.setNavigationBarTitle({title:"安全隐患检查"});break;case"quality":t.setNavigationBarTitle({title:"质量隐患检查"})}this.Token=n.default.net.GetSessionToken(),this.getCompany(),this.getArea(),this.getUnit(),this.getDanger(),console.log(n.default.net.GetUser())},onShow:function(){if(console.log("页面显示"),1!=this.isfirstopen){var e=t.getStorageSync("selectID"),i=t.getStorageSync("selectName");this.rectpeople=i,this.rectpeopleid=e;var a=t.getStorageSync("selectIDs"),s=t.getStorageSync("selectNames");this.noticepeople=s,this.noticepeopleid=a}},onHide:function(){},onUnload:function(){},methods:{submit:function(e){t.removeStorageSync("selectID"),t.removeStorageSync("selectName"),t.removeStorageSync("selectIDs"),t.removeStorageSync("selectNames");var i=n.default.net.setUrl("api/SecurityInspectApi/AddOrUpdate?notifier="+this.noticepeopleid),a={Title:this.title,RectPeople:this.rectpeopleid,ProjectId:this.projectVal,SubcontractingUnit:this.unitVal,Building:this.dong,Floor:this.ceng,SaftyDangerID:this.dangerVal,SaftyDanger:this.dangerText,DangerDesID:this.dangerDesVal,DangerDes:this.dangerDesText,Rectification:this.rectification,ExpirDate:this.deadline,CrashLevel:this.degreeVal,AddPeopleID:n.default.net.GetUser().ID,CheckDate:this.checkDate};this.formcheck(a)&&t.request({url:i,method:"POST",header:{Token:this.Token},data:JSON.stringify(a),success:function(e){var i=e.data;i.data;1==i.status?(t.showToast({title:"提交成功",mask:!1,duration:1500}),setTimeout(function(){t.navigateBack({delta:1})},2e3)):console.log(i.message)},fail:function(){console.log("提交失败")},complete:function(){}})},chooseImage:function(){t.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){console.log(JSON.stringify(t.tempFiles));this.imageList=[1,1],console.log(this.imageList.length)},fail:function(t){console.log(t)}})},getCompany:function(){var e=this,i=n.default.net.setUrl("api/DropDownListApi/GetCompany");t.request({url:i,dataType:"json",type:"GET",header:{token:this.Token},success:function(i){var a=i.data,s=a.data;if(a.status=1){console.log("公司获取成功");s.unshift({value:"08876894",text:"请选择公司"}),e.companyList=e.setData(s),e.companyVal=e.companyList[e.companyIndex].value,e.companyText=e.companyList[e.companyIndex].text,"08876894"!=e.companyVal&&e.getProject()}else console.log(a.status),t.showToast({title:a.status,mask:!1,duration:1500})},fail:function(t,e){console.log("公司获取失败"+t+e)}})},getProject:function(){var e=this,i=n.default.net.setUrl("api/DropDownListApi/GetProject");t.request({url:i,method:"GET",header:{token:this.Token},data:{company:this.companyVal},success:function(t){var i=t.data,a=i.data;console.log(t),(i.status=1)?(e.projectList=e.setData(a),e.projectVal=e.projectList[e.projectIndex].value,e.projectText=e.projectList[e.projectIndex].text):console.log("项目获取失败"+i.status)},fail:function(t,e){console.log("项目数据请求失败"+t+e)}})},getArea:function(){var e=this,i=n.default.net.setUrl("api/DropDownListApi/GetUtilitySettings");t.request({url:i,method:"POST",header:{token:this.Token},data:JSON.stringify({type:0}),success:function(t){var i=t.data;(i.status=1)?(console.log("检查区域获取成功"),e.areaList=e.setData(i.data),e.areaVal=e.areaList[e.areaIndex].value,e.areaText=e.areaList[e.areaIndex].text):console.log("检查区域获取失败"+i.status)},fail:function(t,e){console.log("检查区域数据请求失败"+t+e)}})},getUnit:function(){var e=this,i=n.default.net.setUrl("api/DropDownListApi/GetUtilitySettings");t.request({url:i,method:"POST",header:{token:this.Token},data:JSON.stringify({type:1}),success:function(t){var i=t.data;(i.status=1)?(console.log("施工单位获取成功"),e.unitList=e.setData(i.data),e.unitVal=e.unitList[e.unitIndex].value,e.unitText=e.unitList[e.unitIndex].text):console.log("施工单位获取失败"+i.status)},fail:function(t,e){console.log("施工单位数据请求失败"+t+e)}})},getDanger:function(){var e=this,i=n.default.net.setUrl("api/DropDownListApi/GetQualityDangerType");t.request({url:i,method:"POST",header:{token:this.Token},data:JSON.stringify({type:2}),success:function(t){var i=t.data,a=i.data;if(i.status=1){a.unshift({value:"088",text:"请选择隐患类型"}),e.dangerList=e.setData(a),e.dangerVal=e.dangerList[e.dangerIndex].value,e.dangerText=e.dangerList[e.dangerIndex].text,"088"!=e.dangerVal&&e.getDangerDes()}else console.log("隐患类型获取失败"+i.status)},fail:function(t,e){console.log("施工单位数据请求失败"+t+e)}})},getDangerDes:function(){var e=this;console.log(this.dangerVal);var i=n.default.net.setUrl("api/DropDownListApi/GetQualityDangerDes"),a={size:"9999",page:"1",type:"2",comid:this.dangerVal};t.request({url:i,method:"POST",header:{token:this.Token},data:JSON.stringify(a),success:function(t){var i=t.data,a=i.data;if(i.status=1){a.unshift({value:"088",text:"请选择隐患描述"}),e.dangerDesList=e.setData(i.data),e.dangerDesVal=e.dangerDesList[e.dangerDesIndex].value,e.dangerDesText=e.dangerDesList[e.dangerDesIndex].text}else console.log("隐患描述获取失败"+i.status)},fail:function(t,e){console.log("隐患描述获取失败"+t+e)}})},setData:function(t){var e=[];return null!=t&&0!=t.length&&t.forEach(function(t){e.push({text:t.text,value:t.value})}),e},changeCompany:function(t){this.companyIndex=t.detail.value,this.companyVal=this.companyList[t.detail.value].value,this.companyText=this.companyList[this.companyIndex].text,this.getProject()},changeProject:function(t){this.projectIndex=t.detail.value,this.projectVal=this.projectList[t.detail.value].value,this.projectText=this.projectList[this.projectIndex].text},changeArea:function(t){this.areaIndex=t.detail.value,this.areaText=this.areaList[this.areaIndex].text,this.areaVal=this.areaList[this.areaIndex].value},changeUnit:function(t){this.unitIndex=t.detail.value,this.unitText=this.unitList[this.unitIndex].text,this.unitVal=this.unitList[this.unitIndex].value},changeDanger:function(t){this.dangerIndex=t.detail.value,this.dangerVal=this.dangerList[this.dangerIndex].value,this.dangerText=this.dangerList[this.dangerIndex].text,this.getDangerDes()},changeDangerDes:function(t){this.dangerDesIndex=t.detail.value,this.dangerDesVal=this.dangerDesList[this.dangerDesIndex].value,this.dangerDesText=this.dangerDesList[this.dangerDesIndex].text},selectRect:function(e){this.isfirstopen+=1,t.navigateTo({url:"../../../components/selectPeople"})},selectNotice:function(){this.isfirstopen+=1,t.navigateTo({url:"../../../components/selectPeopleMulti"})},nameInput:function(t){this.title=t.detail.value},dongInput:function(t){this.dong=t.detail.value},cengInput:function(t){this.ceng=t.detail.value},recInput:function(t){this.rectification=t.detail.value},formcheck:function(e){return""==e.RectPeople?(t.showToast({title:"请选择整改人",mask:!0,image:null,duration:1500}),!1):""==e.ProjectId?(t.showToast({title:"请选择项目",mask:!1,duration:1500}),!1):""==e.SubcontractingUnit?(t.showToast({title:"请填写整改单位",mask:!1,duration:1500}),!1):"08876894"==e.BranchCompany?(t.showToast({title:"请选择公司",mask:!1,duration:1500}),!1):"088"==e.SaftyDangerID?(t.showToast({title:"请选择隐患类型",mask:!1,duration:1500}),!1):"088"==e.DangerDesID?(t.showToast({title:"请选择隐患描述",mask:!1,duration:1500}),!1):""==this.noticepeopleid?(t.showToast({title:"请选择通知人",mask:!1,duration:1500}),!1):void 0}}}}).call(e,i(2).default)},24:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"content"},[i("form",{staticClass:"input-form",attrs:{action:"",eventid:"IEj-14"},on:{submit:t.safetySubmit,reset:t.formReset}},[i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),t._v(" "),i("text",[t._v("所属公司:")])]),t._v(" "),i("picker",{attrs:{value:t.companyIndex,range:t.companyList,"range-key":"text",eventid:"FJ8-0"},on:{change:t.changeCompany}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.companyText))])])],1),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-02.png",mode:""}}),t._v(" "),i("text",[t._v("项目名称:")])]),t._v(" "),i("picker",{attrs:{value:t.projectIndex,range:t.projectList,"range-key":"text",eventid:"G8X-1"},on:{change:t.changeProject}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.projectText))])])],1),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-03.png",mode:""}}),t._v(" "),i("text",[t._v("任务名称:")])]),t._v(" "),i("input",{attrs:{type:"text",value:"",placeholder:"请填写任务名称",eventid:"0x7-2"},on:{input:t.nameInput}})]),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-04.png",mode:""}}),t._v(" "),i("text",[t._v("检查楼栋:")])]),t._v(" "),i("input",{attrs:{type:"text",value:"",placeholder:"请填写检查楼栋号",eventid:"zv0-3"},on:{input:t.dongInput}})]),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-05.png",mode:""}}),t._v(" "),i("text",[t._v("检查楼层:")])]),t._v(" "),i("input",{attrs:{type:"text",value:"",placeholder:"请填写检查楼层号",eventid:"amH-4"},on:{input:t.cengInput}})]),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-07.png",mode:""}}),t._v(" "),i("text",[t._v("施工单位:")])]),t._v(" "),i("picker",{attrs:{value:t.unitIndex,range:t.unitList,"range-key":"text",eventid:"hQr-5"},on:{change:t.changeUnit}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.unitText))])])],1),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-08.png",mode:""}}),t._v(" "),i("text",[t._v("隐患类型:")])]),t._v(" "),i("picker",{attrs:{value:t.dangerIndex,range:t.dangerList,"range-key":"text",eventid:"fSa-6"},on:{change:t.changeDanger}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.dangerText))])])],1),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-09.png",mode:""}}),t._v(" "),i("text",[t._v("隐患描述:")])]),t._v(" "),i("picker",{attrs:{value:t.dangerDesVal,range:t.dangerDesList,"range-key":"text",eventid:"oyD-7"},on:{change:t.changeDangerDes}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.dangerDesText))])])],1),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-11.png",mode:""}}),t._v(" "),i("text",[t._v("整改人:")])]),t._v(" "),i("input",{attrs:{type:"text",value:t.rectpeople,placeholder:"",eventid:"NTm-8"},on:{tap:t.selectRect}})]),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-12.png",mode:""}}),t._v(" "),i("text",[t._v("通知人:")])]),t._v(" "),i("input",{attrs:{type:"text",value:t.noticepeople,placeholder:"",eventid:"RyW-9"},on:{tap:t.selectNotice}})]),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-13.png",mode:""}}),t._v(" "),i("text",[t._v("整改期限:")])]),t._v(" "),i("picker",{attrs:{mode:"date",value:t.deadline,start:"2018-09-18",end:"2028-12-31"}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.deadline))])])],1),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-05.png",mode:""}}),t._v(" "),i("text",[t._v("整改要求:")])]),t._v(" "),i("input",{attrs:{type:"text",value:"",placeholder:"请填写整改要求",eventid:"1xE-10"},on:{input:t.recInput}})]),t._v(" "),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-14.png",mode:""}}),t._v(" "),i("text",[t._v("检查日期:")])]),t._v(" "),i("picker",{attrs:{mode:"date",value:t.checkDate,start:"2018-09-18",end:"2028-12-31"}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.checkDate))])])],1),t._v(" "),i("view",{staticClass:"input-row mt-10"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-15.png",mode:""}}),t._v(" "),i("text",[t._v("严重程度:")])]),t._v(" "),i("picker",{attrs:{value:t.degreeVal,range:t.degreeList,eventid:"S4c-11"},on:{change:t.changeDegree}},[i("view",{staticClass:"uni-input"},[t._v(t._s(t.degreeList[t.degreeVal]))])])],1),t._v(" "),i("view",{staticClass:"input-row"},[i("button",{staticClass:"search-btn",attrs:{size:"mini",eventid:"0ty-12"},on:{tap:t.chooseImage}},[t._v("选择图片")]),t._v(" "),t._l(t.imageList,function(e,a){return i("block",{key:a},[i("view",[i("text",[t._v("11111")])])])})],2),t._v(" "),i("view",{staticClass:"input-row"},t._l(t.imageList,function(e,a){return i("block",{key:a},[i("view",[i("text",[t._v("11111")])])])})),t._v(" "),i("view",{staticClass:"input-row"},[i("button",{staticClass:"search-btn",attrs:{size:"mini",eventid:"RAk-13"},on:{tap:t.submit}},[t._v("提交")])],1)])],1)};a._withStripped=!0;var s={render:a,staticRenderFns:[]};e.a=s}},[20]);
//# sourceMappingURL=../../../.sourcemap/pages/index/quality/safetyCheck.js.map
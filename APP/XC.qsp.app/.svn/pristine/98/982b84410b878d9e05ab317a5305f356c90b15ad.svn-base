require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([20],{115:function(t,e,s){"use strict";var a=n(s(1)),i=n(s(116));function n(t){return t&&t.__esModule?t:{default:t}}new a.default(i.default).$mount()},116:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(118),i=s.n(a),n=s(119),o=!1;var c=function(t){o||s(117)},l=s(0)(i.a,n.a,c,"data-v-6a142190",null);l.options.__file="F:\\施工管理平台\\20181026\\XC-XCGL1\\pages\\index\\schedule\\Statistics.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] Statistics.vue: functional components are not supported with templates, they should use render functions."),e.default=l.exports},117:function(t,e){},118:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a,i=s(3),n=(a=i)&&a.__esModule?a:{default:a};e.default={onLoad:function(e){switch(e.state){case"month":t.setNavigationBarTitle({title:"月进度统计"}),this.searchType=3;break;case"season":t.setNavigationBarTitle({title:"季度进度统计"}),this.month=!1,this.season=!0,this.planType="季度",this.searchType=2;break;case"year":t.setNavigationBarTitle({title:"年度进度统计"}),this.secondPicker=!1,this.planType="",this.searchType=1}this.testToken=n.default.net.getTestToken(),console.log("测试token："+this.testToken),this.getCompany()},data:function(){return{testToken:"",planType:"月份",companyList:[],companyVal:"",companyIndex:0,companyText:"",projectList:[],projectIndex:0,projectVal:"",projectText:"",yearIndex:0,yearList:[{text:"2018年",value:2018},{text:"2019年",value:2019},{text:"2020年",value:2020}],yearVal:"",monthList:[{value:1,text:"1月"},{value:2,text:"2月"},{value:3,text:"3月"},{value:4,text:"4月"},{value:5,text:"5月"},{value:6,text:"6月"},{value:7,text:"7月"},{value:8,text:"8月"},{value:9,text:"9月"},{value:10,text:"10月"},{value:11,text:"11月"},{value:12,text:"12月"}],monthIndex:0,monthVal:"",monthText:"",seasonList:[{value:1,text:"第一季度"},{value:2,text:"第二季度"},{value:3,text:"第三季度"},{value:4,text:"第四季度"}],seasonVal:"",seasonIndex:0,scheduleList:[],month:!0,season:!1,year:!1,secondPicker:!0,Date:"2018-10-8",Number:0,planNum:0,realNum:0,rate:"",searchType:1}},methods:{getCompany:function(){var e=this,s=n.default.net.setUrl("api/DropDownListApi/GetCompany");t.request({url:s,dataType:"json",type:"GET",header:{token:this.testToken},success:function(s){var a=s.data;a.data;(a.status=1)?(console.log("公司获取成功"),e.companyList=e.setData(a.data),e.companyVal=e.companyList[e.companyIndex].value,e.companyText=e.companyList[e.companyIndex].text,e.getProject()):(console.log(a.status),t.showToast({title:a.status,mask:!1,duration:1500}))},fail:function(t,e){console.log("公司获取失败"+t+e)}})},getProject:function(){var e=this,s=n.default.net.setUrl("api/DropDownListApi/GetProject");t.request({url:s,method:"GET",header:{token:this.testToken},data:{company:this.companyVal},success:function(t){var s=t.data,a=s.data;(s.status=1)?(e.projectList=e.setData(a),e.projectVal=e.projectList[e.projectIndex].value,e.projectText=e.projectList[e.projectIndex].text):console.log("项目获取失败"+s.status)},fail:function(t,e){console.log("项目数据请求失败"+t+e)},complete:function(){}})},setData:function(t){var e=[];return t.forEach(function(t){e.push({text:t.text,value:t.value})}),e},searchData:function(){var e=this,s=n.default.net.setUrl("api/ScheduleApi/Statistics");this.yearVal=this.yearList[this.yearIndex].value,this.monthVal=this.monthList[this.monthIndex].value,this.seasonVal=this.seasonList[this.seasonIndex].value,console.log(this.searchType);var a={StatisticsType:this.searchType};this.companyVal&&(a.CompanyID=this.companyVal),this.projectVal&&(a.ProjectID=this.projectVal),1==this.searchType?a.Year=this.yearVal:2==this.searchType?a.Quarter=this.seasonVal:a.Month=this.monthVal,t.request({url:s,method:"POST",data:JSON.stringify(a),header:{Token:this.testToken},success:function(s){var a=s.data,i=a.data;1==a.status?""!=i?i.forEach(function(t){e.Date=t.StatisticsName,e.planNum=t.PlanCount,e.realNum=t.FinishCount,e.rate=t.FinishPercent}):t.showToast({title:"无法查询数据，请更换条件"}):(console.log(a.message),t.showToast({title:a.message}))},fail:function(){},complete:function(){}})},changeCompany:function(t){this.companyIndex=t.detail.value,this.companyVal=this.companyList[t.detail.value].value,this.companyText=this.companyList[this.companyIndex].text,this.getProject()},changeProject:function(t){this.projectIndex=t.detail.value,this.projectVal=this.projectList[t.detail.value].value,this.projectText=this.projectList[this.projectIndex].text},changeYears:function(t){this.yearIndex=t.detail.value,this.yearVal=this.yearList[this.yearIndex].value},changeMonth:function(t){this.monthIndex=t.detail.value,this.monthVal=this.monthList[this.monthIndex].value},changeSeason:function(t){this.seasonIndex=t.detail.value,this.seasonVal=this.seasonList[this.seasonIndex].value}}}}).call(e,s(2).default)},119:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"content"},[s("view",{staticClass:"input-row"},[t._m(0),t._v(" "),s("picker",{attrs:{value:t.companyIndex,range:t.companyList,"range-key":"text",eventid:"PAp-0"},on:{change:t.changeCompany}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.companyText))])])],1),t._v(" "),s("view",{staticClass:"input-row"},[t._m(1),t._v(" "),s("picker",{attrs:{value:t.projectIndex,range:t.projectList,"range-key":"text",eventid:"hRX-1"},on:{change:t.changeProject}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.projectText))])])],1),t._v(" "),s("view",{staticClass:"input-row"},[t._m(2),t._v(" "),s("picker",{attrs:{mode:"selector",value:t.yearIndex,range:t.yearList,eventid:"bZg-2"},on:{change:t.changeYears}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.yearList[t.yearIndex].text))])])],1),t._v(" "),t.secondPicker?s("view",{staticClass:"input-row"},[s("view",{staticClass:"input-label"},[s("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),t._v(" "),s("text",[t._v(t._s(t.planType)+"选择:")])]),t._v(" "),t.month?s("picker",{attrs:{mode:"selector",value:t.monthIndex,range:t.monthList,"range-key":"text",eventid:"JOi-3"},on:{change:t.changeMonth}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.monthList[t.monthIndex].text))])]):t._e(),t._v(" "),t.season?s("picker",{attrs:{mode:"selector",value:t.seasonIndex,range:t.seasonList,"range-key":"text",eventid:"8k3-4"},on:{change:t.changeSeason}},[s("view",{staticClass:"uni-input"},[t._v(t._s(t.seasonList[t.seasonIndex].text))])]):t._e()],1):t._e(),t._v(" "),s("view",{staticClass:"button-row"},[s("button",{staticClass:"search-btn",attrs:{type:"",size:"mini",eventid:"fNu-5"},on:{tap:t.searchData}},[t._v("查询")])],1),t._v(" "),s("view",{staticClass:"static-content"},[s("view",{staticClass:"input-row"},[t._m(3),t._v(" "),s("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(Date)+"\n\t\t\t")])]),t._v(" "),s("view",{staticClass:"input-row"},[t._m(4),t._v(" "),s("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.planNum)+"\n\t\t\t")])]),t._v(" "),s("view",{staticClass:"input-row"},[t._m(5),t._v(" "),s("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.realNum)+"\n\t\t\t")])]),t._v(" "),s("view",{staticClass:"input-row"},[t._m(6),t._v(" "),s("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.rate)+"\n\t\t\t")])])])])};a._withStripped=!0;var i={render:a,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),this._v(" "),e("text",[this._v("所属公司:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-02.png",mode:""}}),this._v(" "),e("text",[this._v("项目名称:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),this._v(" "),e("text",[this._v("年份选择:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/jindu_icon/No.png",mode:""}}),this._v(" "),e("text",[this._v("时间:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/jindu_icon/No.png",mode:""}}),this._v(" "),e("text",[this._v("本月重要节点计划个数:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/jindu_icon/No.png",mode:""}}),this._v(" "),e("text",[this._v("本月重要节点完成个数:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/jindu_icon/No.png",mode:""}}),this._v(" "),e("text",[this._v("本月重要节点完成个数:")])])}]};e.a=i}},[115]);
//# sourceMappingURL=../../../.sourcemap/pages/index/schedule/Statistics.js.map
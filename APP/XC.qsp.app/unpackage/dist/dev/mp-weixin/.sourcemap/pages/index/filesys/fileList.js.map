{"version":3,"sources":["webpack:///./F:/施工管理平台/20181101/XC.qsp.app/pages/index/filesys/fileList.js","webpack:///F:/施工管理平台/20181101/XC.qsp.app/pages/index/filesys/fileList.vue","webpack:///./F:/施工管理平台/20181101/XC.qsp.app/pages/index/filesys/fileList.vue","webpack:///F:/施工管理平台/20181101/XC.qsp.app/pages/index/filesys/fileList.vue?79ea"],"names":["__webpack_require__","Vue","App","$mount","__WEBPACK_IMPORTED_MODULE_1__E_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_template_compiler_index_id_data_v_9abbe75c_hasScoped_true_E_HBuilderX_plugins_uniapp_lib_preprocessor_loader_js_type_html_context_MP_WEIXIN_true_E_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_selector_type_template_index_0_fileList_vue__","disposed","__vue_styles__","ssrContext","Component","normalizeComponent","__WEBPACK_IMPORTED_MODULE_0__E_HBuilderX_plugins_uniapp_node_modules_babel_loader_babelrc_false_retainLines_true_presets_E_HBuilderX_plugins_uniapp_node_modules_babel_preset_env_modules_commonjs_targets_browsers_1_last_2_versions_not_ie_8_E_HBuilderX_plugins_uniapp_node_modules_babel_preset_stage_2_plugins_E_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_runtime_helpers_false_polyfill_false_regenerator_true_moduleName_E_HBuilderX_plugins_uniapp_node_modules_babel_runtime_E_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_decorators_legacy_E_HBuilderX_plugins_uniapp_lib_preprocessor_loader_js_type_js_context_MP_WEIXIN_true_E_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_selector_type_script_index_0_fileList_vue___default","a","options","__file","esModule","Object","keys","some","key","substr","console","error","functional","__webpack_exports__","_server","data","fileDatalist","ID","ForeignID","AddUserID","AddUserName","Remark","AddTime","Type","IsDelete","Detail","MasterID","FileName","FileSrc","DownloadCount","FileSize","FileType","isDown","filePath","typeI","methods","getFilelist","typeIndex","_this","this","url","server","net","setUrl","page","operate","type","userName","fileName","uni","request","method","header","token","testToken","success","res","log","fileArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","f","value","substring","_loop","fchild","oNameAttr","split","oName","length","getStorage","fail","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","err","return","stopPullDownRefresh","complete","c","fileDown","e","id","fileSrc","index","cindex","_this2","showLoading","title","mask","downloadFile","Token","statusCode","hideLoading","JSON","stringify","temFile","tempFilePath","saveFile","result","savedFilePath","oldAttr","oldName","newAttr","newName","setStorage","detail","onProgressUpdate","progress","totalBytesWritten","totalBytesExpectedToWrite","fileOpen","paName","openDocument","onLoad","option","setNavigationBarTitle","getTestToken","onPullDownRefresh","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","citem","attrs","hover-class","_v","_s","class","classdown","size","mini","loading","eventid","on","tap","$event","plain","_withStripped","esExports","staticRenderFns"],"mappings":"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","file":"pages/index/filesys/fileList.js","sourcesContent":["\nimport Vue from 'vue'\nimport App from 'F:/施工管理平台/20181101/XC.qsp.app/pages/index/filesys/fileList.vue'\nconst app = new Vue(App)\napp.$mount()\n\n\n\n// WEBPACK FOOTER //\n// ./F:/施工管理平台/20181101/XC.qsp.app/pages/index/filesys/fileList.js","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\node_modules\\\\extract-text-webpack-plugin\\\\dist\\\\loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\node_modules\\\\vue-style-loader!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\css-var-loader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\node_modules\\\\css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\mpvue-loader\\\\lib\\\\style-compiler\\\\index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9abbe75c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\node_modules\\\\px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":1}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\css-upx-loader.js?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":1}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\preprocessor-loader.js?{\\\"type\\\":\\\"js\\\",\\\"context\\\":{\\\"MP-WEIXIN\\\":true}}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\node_modules\\\\postcss-loader?{\\\"config\\\":{\\\"path\\\":\\\"E:\\\\\\\\HBuilderX\\\\\\\\plugins\\\\\\\\uniapp\\\\\\\\.postcssrc.js\\\"},\\\"sourceMap\\\":true}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\preprocessor-loader.js?{\\\"type\\\":\\\"js\\\",\\\"context\\\":{\\\"MP-WEIXIN\\\":true}}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\mpvue-loader\\\\lib\\\\selector?type=styles&index=0!./fileList.vue\")\n}\nvar normalizeComponent = require(\"!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\mpvue-loader\\\\lib\\\\component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\node_modules\\\\babel-loader?{\\\"babelrc\\\":false,\\\"retainLines\\\":true,\\\"presets\\\":[[\\\"E:\\\\\\\\HBuilderX\\\\\\\\plugins\\\\\\\\uniapp\\\\\\\\node_modules\\\\\\\\babel-preset-env\\\",{\\\"modules\\\":\\\"commonjs\\\",\\\"targets\\\":{\\\"browsers\\\":[\\\"> 1%\\\",\\\"last 2 versions\\\",\\\"not ie <= 8\\\"]}}],\\\"E:\\\\\\\\HBuilderX\\\\\\\\plugins\\\\\\\\uniapp\\\\\\\\node_modules\\\\\\\\babel-preset-stage-2\\\"],\\\"plugins\\\":[[\\\"E:\\\\\\\\HBuilderX\\\\\\\\plugins\\\\\\\\uniapp\\\\\\\\node_modules\\\\\\\\babel-plugin-transform-runtime\\\",{\\\"helpers\\\":false,\\\"polyfill\\\":false,\\\"regenerator\\\":true,\\\"moduleName\\\":\\\"E:\\\\\\\\HBuilderX\\\\\\\\plugins\\\\\\\\uniapp\\\\\\\\node_modules\\\\\\\\babel-runtime\\\"}],\\\"E:\\\\\\\\HBuilderX\\\\\\\\plugins\\\\\\\\uniapp\\\\\\\\node_modules\\\\\\\\babel-plugin-transform-decorators-legacy\\\"]}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\preprocessor-loader.js?{\\\"type\\\":\\\"js\\\",\\\"context\\\":{\\\"MP-WEIXIN\\\":true}}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\mpvue-loader\\\\lib\\\\selector?type=script&index=0!./fileList.vue\"\n/* template */\nimport __vue_template__ from \"!!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\mpvue-loader\\\\lib\\\\template-compiler\\\\index?{\\\"id\\\":\\\"data-v-9abbe75c\\\",\\\"hasScoped\\\":true}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\preprocessor-loader.js?{\\\"type\\\":\\\"html\\\",\\\"context\\\":{\\\"MP-WEIXIN\\\":true}}!E:\\\\HBuilderX\\\\plugins\\\\uniapp\\\\lib\\\\mpvue-loader\\\\lib\\\\selector?type=template&index=0!./fileList.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9abbe75c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"F:\\\\施工管理平台\\\\20181101\\\\XC.qsp.app\\\\pages\\\\index\\\\filesys\\\\fileList.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] fileList.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-9abbe75c\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-9abbe75c\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// F:/施工管理平台/20181101/XC.qsp.app/pages/index/filesys/fileList.vue\n// module id = 134\n// module chunks = 34","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\timport server from '../../../store/server.js';\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tfileDatalist: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"ID\":\"00000000-0000-0000-0000-0000000000\",             //主键ID\n\t\t\t\t\t\t\"ForeignID\":\"00000000-0000-0000-0000-0000000000\",       //外键ID\n\t\t\t\t\t\t\"AddUserID\":\"00000000-0000-0000-0000-0000000000\",       //上传人ID\n\t\t\t\t\t\t\"AddUserName\":\"管理员2\",                                 //上传人名称\n\t\t\t\t\t\t\"Remark\":\"说明2\",                               \n\t\t\t\t\t\t\"AddTime\":\"2018-10-10\",                 \n\t\t\t\t\t\t\"Type\":3,                                              // 文件类型\n\t\t\t\t\t\t\"IsDelete\":false,\n\t\t\t\t\t\t\"Detail\":[{                                             // 子集\n\t\t\t\t\t\t\t\"ID\":\"00000000-0000-0000-0000-0000000000\",            //子集主键(用于文件下载传参)\n\t\t\t\t\t\t\t\"MasterID\":\"00000000-0000-0000-0000-0000000000\",\n\t\t\t\t\t\t\t\"FileName\":\"文件名2-1\",                                  // 文件名\n\t\t\t\t\t\t\t\"FileSrc\":\"文件相对路径2-1\",\n\t\t\t\t\t\t\t\"DownloadCount\":1,                                   // 下载次数\n\t\t\t\t\t\t\t\"FileSize\":10086,                                    // 文件大小（字节）\n\t\t\t\t\t\t\t\"FileType\":\".pdf\",\n\t\t\t\t\t\t\t\"isDown\":-1\n\t\t\t\t\t\t},{                                              //子集\n\t\t\t\t\t\t\t\"ID\":\"00000000-0000-0000-0000-0000000000\",            //子集主键(用于文件下载传参)\n\t\t\t\t\t\t\t\"MasterID\":\"00000000-0000-0000-0000-0000000000\",\n\t\t\t\t\t\t\t\"FileName\":\"文件名2-2\",                                   //文件名\n\t\t\t\t\t\t\t\"FileSrc\":\"文件相对路径2-2\",\n\t\t\t\t\t\t\t\"DownloadCount\":1,                                    //下载次数\n\t\t\t\t\t\t\t\"FileSize\":10086,                                     //文件大小（字节）\n\t\t\t\t\t\t\t\"FileType\":\".pdf\",\n\t\t\t\t\t\t\t\"isDown\":-1\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tfilePath:\"\",\n\t\t\t\ttypeI:9\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tgetFilelist(typeIndex) {\n\t\t\t\tlet url = server.net.setUrl('api/FileSystemApi/GetList');\n\t\t\t\tthis.typeI = typeIndex;\n\t\t\t\tlet data = {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\toperate: typeIndex,\n\t\t\t\t\ttype: 0,\n\t\t\t\t\tuserName:\"\",\n\t\t\t\t\tfileName:\"\" \n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tuni.request({\n\t\t\t\t\turl: url,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: data,\n\t\t\t\t\theader: {\n\t\t\t\t\t\ttoken: this.testToken\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log(res)\n \t\t\t\t\t\tlet jsondata = res.data;\n \t\t\t\t\t\tlet fileArr=jsondata.data;\n\t\t\t\t\t\tfor(let f of fileArr){\n\t\t\t\t\t\t\tf.AddTime = f.AddTime.substring(0,10)\n\t\t\t\t\t\t\tswitch(f.Type){\n\t\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\tf.Type=\"安全管理文件\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\tf.Type=\"质量管理文件\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t\tf.Type=\"工程管理文件\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t\tf.Type=\"其他文件\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfor(let fchild of f.Detail){\n\t\t\t\t\t\t\t\tlet oNameAttr =  fchild.FileSrc.split(\"/\");\n\t\t\t\t\t\t\t\tlet oName = oNameAttr[oNameAttr.length-1];\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tuni.getStorage({\n\t\t\t\t\t\t\t\t\tkey:oName,\n\t\t\t\t\t\t\t\t\tsuccess:(res)=>{\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"对比成功\")\n\t\t\t\t\t\t\t\t\t\tfchild.isDown = 1;\n\t\t\t\t\t\t\t\t\t},fail:(fail)=>{\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"对比失败\")\n\t\t\t\t\t\t\t\t\t\tfchild.isDown = 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.fileDatalist = fileArr;\n\t\t\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t\t\t},\n\t\t\t\t\tfail: (f) => {\n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (c) => {\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t},\n\t\t\tfileDown(e,id,fileSrc,index,cindex){\n\t\t\t\tconsole.log(\"执行文件下载方法\");\n\t\t\t\t \n\t\t\t\t\n\t\t\t\tlet url = server.net.setUrl('api/FileSystemApi/DownloadFile');\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '下载中',\n\t\t\t\t\tmask:true\n\t\t\t\t});\n\t\t\t  const downloadTask = \tuni.downloadFile({\n\t\t\t\t\turl: \"http://111.230.193.251:85/api/FileSystemApi/DownloadFile?id=\"+id+\"&filePath=\"+fileSrc, //仅为示例，并非真实的资源\n\t\t\t\t\theader:  {\n\t\t\t\t\t\tToken: this.testToken, \n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\tconsole.log('下载成功');\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\tthis.fileDatalist[index].Detail[cindex].isDown=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(JSON.stringify(res)); \t\n\t\t\t\t\t\tlet temFile = res.tempFilePath;\n\t\t\t\t\t\tuni.saveFile({\n\t\t\t\t\t\t\t\t\t  tempFilePath:temFile ,\n\t\t\t\t\t\t\t\t\t  success: function (result) {\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"保存成功\");\n\t\t\t\t\t\t\t\t\t\tconsole.log(result.savedFilePath)\n\t\t\t\t\t\t\t\t\t\tlet savedFilePath = result.savedFilePath+\"\";\n\t\t\t\t\t\t\t\t\t\tlet tempFilePath = res.tempFilePath+\"\";\n\t\t\t\t\t\t\t\t\t\t//返回的名称\n\t\t\t\t\t\t\t\t\t\tlet oldAttr = tempFilePath.split(\"&\")[0].split(\"/\");\n\t\t\t\t\t\t\t\t\t\tlet oldName = oldAttr[oldAttr.length-1];\n\t\t\t\t\t\t\t\t\t\t//保存的名称\n\t\t\t\t\t\t\t\t\t\tlet newAttr = savedFilePath.split(\"&\")[0].split(\"/\");\n\t\t\t\t\t\t\t\t\t\tlet newName = newAttr[newAttr.length-1];\n\t\t\t\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\t\t\tkey: oldName,\n\t\t\t\t\t\t\t\t\t\t\tdata: newName,\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('保存success');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\t\t\tkey: newName,\n\t\t\t\t\t\t\t\t\t\t\tdata: oldName,\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('appsuccess');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t  },fail:function(fail){\n\t\t\t\t\t\t\t\t\t  \tconsole.log(\"保存失败\")\n\t\t\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(fail))\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfail:(detail) => {\n\t\t\t\t\t\tconsole.log(\"失败\"+detail)\n\t\t\t\t\t\tconsole.log(JSON.stringify(detail))\n\t\t\t\t\t},\n\t\t\t\t\tcomplete:(result) => {\n\t\t\t\t\t\tconsole.log(result)\n\t\t\t\t\t}\n\t\t\t\t});\t\t\n\t\t\t\t\n\t\t\t\tdownloadTask.onProgressUpdate((res) => {\n\t\t\t\t\tconsole.log('下载进度' + res.progress);\n\t\t\t\t\tconsole.log('已经下载的数据长度' + res.totalBytesWritten);\n\t\t\t\t\tconsole.log('预期需要下载的数据总长度' + res.totalBytesExpectedToWrite);\n\t\t\t\t});\n\t\t\t},\n\t\t\tfileOpen(fileName){\n\t\t\t\tlet paName = \"\";\n\t\t\t\tuni.getStorage({\n\t\t\t\t\tkey:fileName,\n\t\t\t\t\tsuccess:(res)=>{\n\t\t\t\t\t\tconsole.log(\"对比成功\")\n\t\t\t\t\t\tpaName = res.data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tuni.openDocument({\n\t\t\t\t\tfilePath:\"_doc/uniapp_temp/download/uniapp_save/\"+paName,\n\t\t\t\t\t//_doc/uniapp_save/1539245941096.pdf\n\t\t\t\t\tsuccess:function(result){\n\t\t\t\t\t\tconsole.log(JSON.stringify(result))\n\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log(\"打开成功\");\n\t\t\t\t\t},\n\t\t\t\t\tfail:function(res){\n\t\t\t\t\t\tconsole.log(JSON.stringify(res))\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tonLoad(option) {\n\t\t\t//根据页面传值判断页面内容：检查记录&整改记录，并动态设置页面标题\n\t\t\tlet Type = option.type;\n\t\t\tswitch (Type) {\n\t\t\t\tcase '1':\n\t\t\t\t\tuni.setNavigationBarTitle({\n\t\t\t\t\t\ttitle: '我的文件'\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase '2':\n\t\t\t\t\tuni.setNavigationBarTitle({\n\t\t\t\t\t\ttitle: '与我相关'\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase '0':\n\t\t\t\t\tuni.setNavigationBarTitle({\n\t\t\t\t\t\ttitle: '共享文件'\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefualt: break;\n\t\t\t}\n\t\t\t\n\t\t\tthis.testToken = server.net.getTestToken();\n\t\t\tconsole.log(\"测试token：\"+server.net.getTestToken());\n\t\t\t//获取文件列表\n\t\t\tthis.getFilelist(Type);\n\t\t\t\n\t\t},onPullDownRefresh() {\n\t\t\tconsole.log('下拉刷新');\n\t\t\tthis.getFilelist(this.typeI);\n\t\t}\n\t}\n\n\n\n// WEBPACK FOOTER //\n// ./F:/施工管理平台/20181101/XC.qsp.app/pages/index/filesys/fileList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('view', {\n    staticClass: \"content\"\n  }, [_c('view', {\n    staticClass: \"list-content\"\n  }, [_c('view', {\n    staticClass: \"uni-list\"\n  }, _vm._l((_vm.fileDatalist), function(item, index) {\n    return _c('block', {\n      key: index\n    }, _vm._l((item.Detail), function(citem, cindex) {\n      return _c('block', {\n        key: cindex\n      }, [_c('view', {\n        staticClass: \"uni-list-cell\",\n        attrs: {\n          \"hover-class\": \"uni-list-cell-hover\"\n        }\n      }, [_c('view', {\n        staticClass: \"uni-triplex-row\"\n      }, [_c('view', {\n        staticClass: \"uni-triplex-left\"\n      }, [_c('text', {\n        staticClass: \"list-title uni-ellipsis\"\n      }, [_vm._v(_vm._s(citem.FileName))]), _vm._v(\" \"), _c('text', {\n        staticClass: \"list-deadline\"\n      }, [_vm._v(_vm._s(item.AddUserName))]), _vm._v(\" \"), _c('text', {\n        staticClass: \"list-level\"\n      }, [_vm._v(_vm._s(item.AddTime))]), _vm._v(\" \"), _c('text', {\n        staticClass: \"list-state\"\n      }, [_vm._v(_vm._s(item.Type))]), _vm._v(\" \"), _c('button', {\n        staticClass: \"list-button\",\n        class: {\n          classdown: citem.isDown == 1\n        },\n        attrs: {\n          \"type\": \"primary\",\n          \"size\": _vm.mini,\n          \"loading\": false,\n          \"eventid\": 'dzr-0-' + index + '-' + cindex\n        },\n        on: {\n          \"tap\": function($event) {\n            _vm.fileDown($event, citem.ID, citem.FileSrc, index, cindex)\n          }\n        }\n      }, [_vm._v(\"下载\")]), _vm._v(\" \"), _c('button', {\n        staticClass: \"list-button\",\n        class: {\n          classdown: citem.isDown == 0\n        },\n        attrs: {\n          \"type\": \"primary\",\n          \"size\": _vm.mini,\n          \"loading\": false,\n          \"plain\": true,\n          \"eventid\": 'EjK-1-' + index + '-' + cindex\n        },\n        on: {\n          \"tap\": function($event) {\n            _vm.fileOpen(citem.FileName)\n          }\n        }\n      }, [_vm._v(\"打开\")])], 1)])])])\n    }))\n  }))])])\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-9abbe75c\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/mpvue-loader/lib/template-compiler?{\"id\":\"data-v-9abbe75c\",\"hasScoped\":true}!./lib/preprocessor-loader.js?{\"type\":\"html\",\"context\":{\"MP-WEIXIN\":true}}!./lib/mpvue-loader/lib/selector.js?type=template&index=0!F:/施工管理平台/20181101/XC.qsp.app/pages/index/filesys/fileList.vue\n// module id = 137\n// module chunks = 34"],"sourceRoot":""}
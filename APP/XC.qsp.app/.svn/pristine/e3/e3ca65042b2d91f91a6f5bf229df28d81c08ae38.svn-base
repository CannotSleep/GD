require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([9],{80:function(t,e,a){"use strict";var s=i(a(1)),n=i(a(81));function i(t){return t&&t.__esModule?t:{default:t}}new s.default(n.default).$mount()},81:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(83),n=a.n(s),i=a(84),o=!1;var c=function(t){o||a(82)},l=a(0)(n.a,i.a,c,"data-v-6c20a6ac",null);l.options.__file="F:\\施工管理平台\\20181026\\XC-XCGL1\\pages\\index\\site\\MeasuringList.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] MeasuringList.vue: functional components are not supported with templates, they should use render functions."),e.default=l.exports},82:function(t,e){},83:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s,n=a(3),i=(s=n)&&s.__esModule?s:{default:s};e.default={onLoad:function(t){this.testToken=i.default.net.GetLocalToken(),console.log("测试token："+i.default.net.GetLocalToken()),this.getCompany()},data:function(){return{testToken:"",companyList:[],companyIndex:0,projectList:[],companyText:"请获取公司",projectText:"请获取项目",projectIndex:0,companyVal:"",projectVal:"",MeasuringList:[]}},methods:{getCompany:function(){var e=this,a=i.default.net.setUrl("api/DropDownListApi/GetCompany");t.request({url:a,dataType:"json",type:"GET",header:{token:this.testToken},success:function(a){var s=a.data,n=s.data;if(console.log(a),s.status=1){console.log("公司获取成功");n.unshift({value:"08876894",text:"请选择公司"}),e.companyList=e.setData(s.data),e.companyVal=e.companyList[e.companyIndex].value,e.companyText=e.companyList[e.companyIndex].text,"08876894"!=e.companyVal&&e.getProject()}else console.log(s.status),t.showToast({title:s.status,mask:!1,duration:1500})},fail:function(t,e){console.log("公司获取失败"+t+e)}})},getProject:function(){var e=this,a=i.default.net.setUrl("api/DropDownListApi/GetProject");t.request({url:a,method:"GET",header:{token:this.testToken},data:{company:this.companyVal},success:function(t){var a=t.data,s=a.data;(a.status=1)?(e.projectList=e.setData(s),e.projectVal=e.projectList[e.projectIndex].value,e.projectText=e.projectList[e.projectIndex].text):console.log("项目获取失败"+a.status)},fail:function(t,e){console.log("项目数据请求失败"+t+e)},complete:function(){}})},setData:function(t){var e=[];return t.forEach(function(t){e.push({text:t.text,value:t.value})}),e},changeCompany:function(t){this.companyIndex=t.detail.value,this.companyVal=this.companyList[t.detail.value].value,this.companyText=this.companyList[this.companyIndex].text,this.getProject()},changeProject:function(t){this.projectIndex=t.detail.value,this.projectVal=this.projectList[t.detail.value].value,this.projectText=this.projectList[this.projectIndex].text},searchData:function(){this.MeasuringList=[];var t=this.companyVal,e=this.projectVal;this.getListData(t,e)},getListData:function(e,a){var s=this,n=i.default.net.setUrl("api/ActualQuantityApi/GetList"),o={page:1};e&&(o.company=e),a&&(o.project=a);JSON.stringify(o);t.request({url:n,method:"POST",header:{token:this.testToken},data:o,success:function(e){var a=e.data;if(1==a.status){console.log("混凝土回弹列表获取成功");var n=a.data,i=[];""!=n?(n.forEach(function(t){i.push({CheckDate:t.CheckDate.substring(0,10),ProjectName:t.ProjectName,ID:t.ID,CheckPeopleName:t.CheckPeopleName})}),s.MeasuringList=i):t.showToast({title:"暂无数据"})}},fail:function(){},complete:function(){}})},goDetail:function(e){e.ID;t.navigateTo({url:"MeasuringDetails?id="+e.ID})}}}}).call(e,a(2).default)},84:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"content"},[a("view",{staticClass:"input-row"},[t._m(0),t._v(" "),a("picker",{attrs:{value:t.companyIndex,range:t.companyList,"range-key":"text",eventid:"xvQ-0"},on:{change:t.changeCompany}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.companyText))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[t._m(1),t._v(" "),a("picker",{attrs:{value:t.projectIndex,range:t.projectList,"range-key":"text",eventid:"TFw-1"},on:{change:t.changeProject}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.projectText))])])],1),t._v(" "),a("view",{staticClass:"input-row"},[a("button",{staticClass:"search-btn",attrs:{size:"mini",eventid:"waG-2"},on:{tap:t.getCompany}},[t._v("获取公司")]),t._v(" "),a("button",{staticClass:"search-btn",attrs:{size:"mini",eventid:"oum-3"},on:{tap:t.getProject}},[t._v("获取项目")]),t._v(" "),a("button",{staticClass:"search-btn",attrs:{type:"",size:"mini",eventid:"Tn6-4"},on:{tap:t.searchData}},[t._v("查询")])],1),t._v(" "),a("view",{staticClass:"list-content"},[a("view",{staticClass:"uni-list"},t._l(t.MeasuringList,function(e,s){return a("block",{key:s},[a("view",{staticClass:"uni-list-cell",attrs:{"hover-class":"uni-list-cell-hover",eventid:"XTE-5-"+s},on:{tap:function(a){t.goDetail(e)}}},[a("view",{staticClass:"uni-triplex-row"},[a("view",{staticClass:"uni-triplex-left"},[a("text",{staticClass:"list-title uni-ellipsis"},[t._v(t._s(e.ProjectName))]),t._v(" "),a("label",[a("text",{staticClass:"list-deadline"},[t._v(t._s(e.CheckDate))]),t._v(" "),a("text",{staticClass:"list-level"},[t._v(t._s(e.CheckPeopleName))])])],1)])])])}))])])};s._withStripped=!0;var n={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),this._v(" "),e("text",[this._v("所属公司:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-02.png",mode:""}}),this._v(" "),e("text",[this._v("项目名称:")])])}]};e.a=n}},[80]);
//# sourceMappingURL=../../../.sourcemap/pages/index/site/MeasuringList.js.map
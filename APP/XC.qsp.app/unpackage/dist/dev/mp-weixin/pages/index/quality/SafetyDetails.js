require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([35],{43:function(t,e,i){"use strict";var s=n(i(1)),a=n(i(44));function n(t){return t&&t.__esModule?t:{default:t}}new s.default(a.default).$mount()},44:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(46),a=i.n(s),n=i(47),o=!1;var l=function(t){o||i(45)},c=i(0)(a.a,n.a,l,"data-v-0404f4b6",null);c.options.__file="F:\\施工管理平台\\20181101\\XC.qsp.app\\pages\\index\\quality\\SafetyDetails.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] SafetyDetails.vue: functional components are not supported with templates, they should use render functions."),e.default=c.exports},45:function(t,e){},46:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s,a=i(3),n=(s=a)&&s.__esModule?s:{default:s};e.default={data:function(){return{pageId:"",Token:"",SubcontractingUnit:"",SubcontractingUnitName:"",Title:"",Number:"",Project:"",RectPeople:"",Company:"",CompanyName:"",Building:"",Floor:"",SafetyDanger:"",DangerDes:"",ExpirDate:"",CrashLevel:"",CheckDate:"",ReCheckDate:"",State:"",Rectification:"",AddPeople:"",isReply:!1,isApproval:!1,isRejected:!1,isRecheck:!1,isFinished:!1,replyContent:"",rejuectContent:"",imageList:[],repleyList:[],ReState:0,RefuseReason:""}},onLoad:function(t){this.pageId=t.id,this.Token=n.default.net.GetSessionToken(),this.getDetails(t.id),this.GetImage(),this.GetReply()},onShow:function(){this.GetImage(),this.GetReply()},methods:{getDetails:function(e){var i=this,s=n.default.net.setUrl("api/SecurityInspectApi/GetList");console.log(e);var a=JSON.stringify({ID:e});t.request({url:s,method:"POST",dataType:"json",header:{Token:this.Token,"content-type":"application/json"},data:a,success:function(e){n.default.net.showWrongTipsEx(e);var s=e.data,a=s.data;console.log(e),1==s.status?a.forEach(function(t){switch(i.Title=t.Title,i.Company=t.Company,i.CompanyName=t.CompanyName,i.Project=t.ProjectName,i.Number=t.Number,i.Floor=t.Floor,i.Building=t.Building,i.SubcontractingUnit=t.SubcontractingUnit,i.SubcontractingUnitName=t.SubcontractingUnitName,i.SafetyDanger=t.SaftyDanger,i.DangerDes=t.DangerDes,i.RectPeople=t.RectPeopleName,i.Rectification=t.Rectification,i.AddPeople=t.AddPeopleName,i.ExpirDate=t.ExpireDate.substring(0,10),i.CheckDate=t.CheckDate.substring(0,10),i.ReCheckDate=t.ReCheckDate.substring(0,10),i.CrashLevel=t.CrashLevelName,i.State=t.StateName,i.ReState=t.State,i.RefuseReason=t.RefuseReason,t.State){case 0:i.isApproval=!0,i.isRejected=!0;break;case 1:i.isReply=!0;break;case 2:i.JudgeAc()}}):(console.log(s.message),t.showToast({title:s.message}))},fail:function(e){console.log(e),t.showToast({title:"数据获取失败，请检查您的网络环境"})}})},JudgeAc:function(){var e=this,i=n.default.net.setUrl("api/QualityApi/JudgeAc?proid="+this.pageId);t.request({url:i,method:"POST",header:{token:this.Token},success:function(t){n.default.net.showWrongTipsEx(t),"9"==t.data&&(e.isRecheck=!0,e.isFinished=!0)},fail:function(){},complete:function(){}})},Reply:function(e){var i=0;switch(e){case 1:i=1;break;case 2:i=2}t.navigateTo({url:"Repley?Type=1&SubType="+i+"&id="+this.pageId})},Review:function(e){console.log(e),console.log(this.rejuectContent);var i=n.default.net.setUrl("api/SecurityInspectApi/Review"),s={id:this.pageId,state:e+"",content:this.rejuectContent};console.log(s),t.request({url:i,method:"POST",data:JSON.stringify(s),header:{token:this.Token},success:function(e){n.default.net.showWrongTipsEx(e);var i=e.data;t.showToast({title:i.message}),setTimeout(function(){t.navigateBack({delta:1})},2e3)},fail:function(){},complete:function(){}})},previewImage:function(e){var i=e.target.dataset.src;t.previewImage({current:i,urls:this.imageList})},GetImage:function(e){var i=this;console.log(this.pageId);var s=n.default.net.setUrl("api/FileApi/GetFileTable?foreignId="+this.pageId+"&type=1");t.request({url:s,method:"POST",header:{token:this.Token},success:function(t){n.default.net.showWrongTipsEx(t);var e=t.data.data,s=[],a=!0,o=!1,l=void 0;try{for(var c,r=e[Symbol.iterator]();!(a=(c=r.next()).done);a=!0){var u=c.value,p=n.default.net.setUrl(u.FileSrc);s.push(p)}}catch(t){o=!0,l=t}finally{try{!a&&r.return&&r.return()}finally{if(o)throw l}}i.imageList=s},fail:function(){},complete:function(){}})},GetReply:function(e){var i=this;console.log(this.pageId);var s=n.default.net.setUrl("api/SecurityInspectApi/GetRepleyList"),a={qid:this.pageId};t.request({url:s,method:"POST",header:{token:this.Token},data:JSON.stringify(a),success:function(t){n.default.net.showWrongTipsEx(t);var e=t.data.data;console.log(e);var s=!0,a=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var r=l.value,u=!0,p=!1,v=void 0;try{for(var d,g=r.FileImage[Symbol.iterator]();!(u=(d=g.next()).done);u=!0){var m=d.value;m.FileSrc=n.default.net.setUrl(m.FileSrc)}}catch(t){p=!0,v=t}finally{try{!u&&g.return&&g.return()}finally{if(p)throw v}}}}catch(t){a=!0,o=t}finally{try{!s&&c.return&&c.return()}finally{if(a)throw o}}i.repleyList=e},fail:function(){},complete:function(){}})}}}}).call(e,i(2).default)},47:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"content"},[i("form",{staticClass:"input-form",attrs:{action:"",eventid:"b0e-8"},on:{submit:t.safetySubmit,reset:t.formReset}},[i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),i("text",[t._v("编号:")])]),i("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(Number)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),i("text",[t._v("分公司:")])]),i("view",{staticClass:"detail-box"},[t._v(" \n\t\t\t\t"+t._s(t.CompanyName)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-02.png",mode:""}}),i("text",[t._v("工程项目:")])]),i("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.Project)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-03.png",mode:""}}),i("text",[t._v("任务名称:")])]),i("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.Title)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-04.png",mode:""}}),i("text",[t._v("栋号:")])]),i("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.Floor)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-05.png",mode:""}}),i("text",[t._v("楼层:")])]),i("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.Building)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-07.png",mode:""}}),i("text",[t._v("分包单位:")])]),i("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.SubcontractingUnit)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-08.png",mode:""}}),i("text",[t._v("隐患类型:")])]),i("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.SafetyDanger)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-09.png",mode:""}}),i("text",[t._v("隐患描述:")])]),i("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.DangerDes)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-05.png",mode:""}}),i("text",[t._v("整改要求:")])]),i("view",{staticClass:"detail-box"},[t._v("\n\t\t\t\t"+t._s(t.Rectification)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-11.png",mode:""}}),i("text",[t._v("整改人:")])]),i("view",{staticClass:"detail-box auto-height"},[t._v("\n\t\t\t\t"+t._s(t.RectPeople)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-13.png",mode:""}}),i("text",[t._v("整改日期:")])]),i("view",{staticClass:"detail-box auto-height"},[t._v("\n\t\t\t\t"+t._s(t.ExpirDate)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-14.png",mode:""}}),i("text",[t._v("检查日期:")])]),i("view",{staticClass:"detail-box auto-height"},[t._v("\n\t\t\t\t"+t._s(t.CheckDate)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-14.png",mode:""}}),i("text",[t._v("复查日期:")])]),i("view",{staticClass:"detail-box auto-height"},[t._v("\n\t\t\t\t"+t._s(t.ReCheckDate)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-10.png",mode:""}}),i("text",[t._v("紧急级别:")])]),i("view",{staticClass:"detail-box auto-height"},[t._v("\n\t\t\t\t"+t._s(t.CrashLevel)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-11.png",mode:""}}),i("text",[t._v("填写人:")])]),i("view",{staticClass:"detail-box auto-height"},[t._v("\n\t\t\t\t"+t._s(t.AddPeople)+"\n\t\t\t")])]),i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-12.png",mode:""}}),i("text",[t._v("状态:")])]),i("view",{staticClass:"detail-box auto-height"},[t._v("\n\t\t\t\t"+t._s(t.State)+"\n\t\t\t")])]),i("view",{staticClass:"input-row-bottom-line"}),i("view",[i("view",{staticClass:"uni-list-cell cell-pd"},[i("view",{staticClass:"uni-uploader"},[i("view",{staticClass:"uni-uploader-head"},[i("image",{staticClass:"imicon",attrs:{src:"../../../static/img/list1_icon/list1_icon-15.png",mode:""}}),i("view",{staticClass:"uni-uploader-title"},[t._v("图片:")])]),i("view",{staticClass:"uni-uploader-body"},[i("view",{staticClass:"uni-uploader__files"},t._l(t.imageList,function(e,s){return i("block",{key:s},[i("view",{staticClass:"uni-uploader__file"},[i("image",{staticClass:"uni-uploader__img",attrs:{src:e,"data-src":e,eventid:"Dmu-0-"+s},on:{tap:t.previewImage}})])])}))])])])]),i("view",{staticClass:"input-row-bottom-line"}),t.isRejected?i("view",{staticClass:"input-row"},[i("view",{staticClass:"input-label"},[i("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-12.png",mode:""}}),i("text",[t._v("拒绝理由:")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.rejuectContent,expression:"rejuectContent"}],attrs:{type:"text",value:"",placeholder:"请填写拒绝理由",eventid:"C0A-1"},domProps:{value:t.rejuectContent},on:{input:function(e){e.target.composing||(t.rejuectContent=e.target.value)}}})]):t._e(),i("view",{staticClass:"input-row-bottom-line"}),i("view",{staticClass:"grace-comment"},t._l(t.repleyList,function(e,s){return i("block",{key:s},[i("view",{staticClass:"grace-comment-list"},[i("view",{staticClass:"grace-comment-face"},[i("image",{attrs:{src:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/uni@2x.png",mode:"widthFix"}})]),i("view",{staticClass:"grace-comment-body"},[i("view",{staticClass:"grace-comment-top"},[i("text",[t._v(t._s(1==e.Type?"回复":"复查"))]),i("text",{staticClass:"grace-iconfont icon-zan"})]),i("view",{staticClass:"grace-comment-date"},[i("text",[t._v(t._s(e.ReplyTime))])]),i("view",{staticClass:"grace-comment-content"},[t._v(t._s(e.ReplyContent))]),i("view",{staticClass:"uni-uploader-body"},[i("view",{staticClass:"uni-uploader__files"},t._l(e.FileImage,function(e,a){return i("block",{key:a},[i("view",{staticClass:"uni-uploader__file"},[i("image",{staticClass:"uni-uploader__img",attrs:{src:e.FileSrc,"data-src":e.FileSrc,eventid:"goa-2-"+s+"-"+a},on:{tap:t.previewImage}})])])}))])])])])})),i("view",{staticClass:"button-row mt-10"},[t.isReply?i("button",{staticClass:"search-btn",attrs:{size:"mini",eventid:"O0d-3"},on:{tap:function(e){t.Reply(1)}}},[t._v("回复")]):t._e(),t.isApproval?i("button",{staticClass:"danger-btn",attrs:{size:"mini",eventid:"Ts4-4"},on:{tap:function(e){t.Review(4)}}},[t._v("审批拒绝")]):t._e(),t.isRejected?i("button",{staticClass:"search-btn",attrs:{size:"mini",eventid:"tXD-5"},on:{tap:function(e){t.Review(1)}}},[t._v("审批通过")]):t._e(),t.isRecheck?i("button",{staticClass:"search-btn",attrs:{size:"mini",eventid:"Aoh-6"},on:{tap:function(e){t.Reply(2)}}},[t._v("复查")]):t._e(),t.isFinished?i("button",{staticClass:"search-btn",attrs:{size:"mini",eventid:"Zzf-7"},on:{tap:function(e){t.Review(3)}}},[t._v("合格完成")]):t._e()],1)])],1)};s._withStripped=!0;var a={render:s,staticRenderFns:[]};e.a=a}},[43]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/index/quality/SafetyDetails.js.map
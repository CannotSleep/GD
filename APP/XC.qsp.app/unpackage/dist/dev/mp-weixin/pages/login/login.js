require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([7],{18:function(t,e,n){"use strict";var o=a(n(1)),s=a(n(19));function a(t){return t&&t.__esModule?t:{default:t}}new o.default(s.default).$mount()},19:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),s=n.n(o),a=n(22),i=!1;var l=function(t){i||n(20)},u=n(0)(s.a,a.a,l,"data-v-7f08a396",null);u.options.__file="F:\\施工管理平台\\20181101\\XC.qsp.app\\pages\\login\\login.vue",u.esModule&&Object.keys(u.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),u.options.functional&&console.error("[vue-loader] login.vue: functional components are not supported with templates, they should use render functions."),e.default=u.exports},20:function(t,e){},21:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(3),a=(o=s)&&o.__esModule?o:{default:o};e.default={data:function(){return{src:"../../static/img/logo.png",account:"",password:"",loading:!1,isAuto:!1,index:0}},methods:{login:function(){var e=this;if(this.loading=!0,this.account.length<1)t.showToast({icon:"none",title:"用户名不能为空",success:function(t){e.loading=!1}});else if(this.password.length<1)t.showToast({icon:"none",title:"密码不能为空",success:function(t){e.loading=!1}});else{var n=JSON.stringify({AccountID:this.account,Password:this.password}),o=a.default.net.setUrl("api/loginapi/login");t.request({url:o,data:n,dataType:"json",method:"POST",header:{"content-type":"application/json"},success:function(n,o){var s=n.data;1==s.status?(t.showToast({icon:"none",title:"登录成功"}),a.default.net.SetSessionToken(s.token),a.default.net.SetUser(s.data),e.getAuthorityMenus(),1==e.isAuto&&a.default.net.SetLocalToken(s.token),t.switchTab({url:"../index/index",fail:function(t){console.log("跳转失败")}}),console.log("本次登录token："+a.default.net.GetSessionToken())):t.showToast({icon:"none",title:s.message,success:function(t){e.loading=!1}})},fail:function(t){a.default.net.showFailTips(t)},complete:function(){e.loading=!1}})}},autoLogin:function(t){this.isAuto=t.detail.value},getAuthorityMenus:function(){var e=a.default.net.setUrl("api/loginapi/GetAuthority");t.request({url:e,method:"POST",header:{Token:a.default.net.GetSessionToken()},success:function(t){var e=t.data,n=e.data;if(1==e.status){var o="";console.log("菜单权限获取成功");for(var s=0;s<n.length;s++)o+=n[s].Name+",",""!=n[s].AppTitle&&(o+=n[s].AppTitle+",");a.default.net.SetMenus(o)}else console.log("菜单权限获取失败"),a.default.net.SetMenus("")},fail:function(t,e){a.default.net.showFailTips(t),console.log("菜单权限获取失败:"+t+e),a.default.net.SetMenus("")},complete:function(){}})}}}}).call(e,n(2).default)},22:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"content"},[n("view",{staticClass:"img-group mt-20"},[n("image",{attrs:{src:t.src}})]),n("view",{staticClass:"input-group mt-20"},[n("view",{staticClass:"login-input-row mt-20"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"text",value:"",placeholder:"请输入用户名","placeholder-style":"color:#fff",eventid:"481-0"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),n("view",{staticClass:"login-input-row mt-20"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",value:"",placeholder:"请输入密码","placeholder-style":"color:#fff",eventid:"yog-1"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("view",{staticClass:"login-input-row mt-20 "},[n("view",{staticClass:"uni-list-cell uni-list-cell-pd"},[n("view",{staticClass:"uni-list-cell-db"},[t._v("自动登录")]),n("switch",{attrs:{color:"#0ce998",eventid:"VLk-2"},on:{change:t.autoLogin}})])]),n("view",{staticClass:"btn-row"},[n("button",{attrs:{type:"primary",loading:t.loading,eventid:"B5J-3"},on:{tap:t.login}},[t._v("登录")])],1)])])};o._withStripped=!0;var s={render:o,staticRenderFns:[]};e.a=s}},[18]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/login.js.map
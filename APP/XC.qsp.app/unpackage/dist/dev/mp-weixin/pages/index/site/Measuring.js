require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([13],{83:function(t,e,a){"use strict";var s=n(a(1)),i=n(a(84));function n(t){return t&&t.__esModule?t:{default:t}}new s.default(i.default).$mount()},84:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(86),i=a.n(s),n=a(87),o=!1;var r=function(t){o||a(85)},c=a(0)(i.a,n.a,r,"data-v-5e40584d",null);c.options.__file="F:\\施工管理平台\\20181101\\XC.qsp.app\\pages\\index\\site\\Measuring.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] Measuring.vue: functional components are not supported with templates, they should use render functions."),e.default=c.exports},85:function(t,e){},86:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s,i=a(3),n=(s=i)&&s.__esModule?s:{default:s};e.default={onLoad:function(){this.testToken=n.default.net.GetLocalToken(),this.getProject()},onShow:function(){if(console.log("页面显示"),1!=this.isfirstopen){var e=t.getStorageSync("selectID"),a=t.getStorageSync("selectName");this.rectpeople=a,this.rectpeopleid=e}},data:function(){return{testToken:"",projectName:"",projectNum:"",checkPer:"",checkDate:"请选择检查日期",areaVal:"",areaList:[],areaIndex:0,areaText:"",ConstructVal:"",ConstructList:[],ConstructIndex:0,ConstructText:"",engProjectVal:"",engProjectList:[],engProjectIndex:0,engProjectText:"",isAdd:!0,dataList:[],projectList:[],projectText:"请获取项目",projectIndex:0,projectVal:"",rectpeople:"整改人",rectpeopleid:"",isfirstopen:1}},methods:{getArea:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetUtilitySettings"),s={type:0};""!=this.projectVal&&(s.projectid=this.projectVal),console.log(0x27797f26d671c8),t.request({url:a,method:"POST",header:{Token:this.Token},data:JSON.stringify(s),success:function(t){n.default.net.showWrongTipsEx(t),console.log(JSON.stringify(t));var a=t.data;1==a.status?(console.log("检查区域获取成功"),e.areaList=e.setData(a.data),e.areaVal=e.areaList[e.areaIndex].value,e.areaText=e.areaList[e.areaIndex].text):console.log("检查区域获取失败"+a.status)},fail:function(t,e){console.log("检查区域数据请求失败"+t+e)}})},getConstruction:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetActualQuaComList"),s={};""!=this.projectVal&&(s.projectid=this.projectVal),t.request({url:a,method:"POST",header:{token:this.testToken},data:JSON.stringify(s),success:function(t){n.default.net.showWrongTipsEx(t);var a=t.data;1==a.status?(console.log("构件类型获取成功"),e.ConstructList=e.setData(a.data),e.ConstructVal=e.ConstructList[e.ConstructIndex].value,e.ConstructText=e.ConstructList[e.ConstructIndex].text,e.GetActualQuaTermList()):console.log("构件类型获取失败"+a.status)},fail:function(t,e){console.log("构件类型数据请求失败"+t+e)}})},GetActualQuaTermList:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetActualQuaTermList"),s={comid:this.ConstructVal};t.request({url:a,method:"POST",header:{Token:this.testToken},data:JSON.stringify(s),success:function(t){n.default.net.showWrongTipsEx(t);var a=t.data;1==a.status?(console.log("主控项目获取成功"),e.engProjectList=e.setData(a.data),e.engProjectVal=e.engProjectList[e.engProjectIndex].value,e.engProjectText=e.engProjectList[e.engProjectIndex].text):console.log("主控项目获取失败"+a.status)},fail:function(){},complete:function(){}})},getProject:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetProject");t.request({url:a,method:"GET",header:{token:this.testToken},data:{},success:function(t){n.default.net.showWrongTipsEx(t);var a=t.data,s=a.data;if(1==a.status){s.unshift({value:"",text:"请选择项目"}),e.projectList=e.setData(s),e.projectVal=e.projectList[e.projectIndex].value,e.projectText=e.projectList[e.projectIndex].text,""!=e.projectVal&&(e.getArea(),e.getConstruction())}else console.log("项目获取失败"+a.status)},fail:function(t,e){console.log("项目数据请求失败"+t+e)},complete:function(){}})},setData:function(t){var e=[];return t.forEach(function(t){e.push({text:t.text,value:t.value})}),e},changeArea:function(t){this.areaIndex=t.detail.value,this.areaText=this.areaList[this.areaIndex].text,this.areaVal=this.areaList[this.areaIndex].value},changeConstruct:function(t){this.ConstructIndex=t.detail.value,this.ConstructVal=this.ConstructList[this.ConstructIndex].value,this.ConstructText=this.ConstructList[this.ConstructIndex].text,this.GetActualQuaTermList()},changeProject:function(t){this.projectIndex=t.detail.value,this.projectVal=this.projectList[t.detail.value].value,this.projectText=this.projectList[this.projectIndex].text,this.getArea(),this.getConstruction()},changeEngproject:function(t){this.engProjectIndex=t.detail.value,this.engProjectVal=this.engProjectList[this.engProjectIndex].value,this.engProjectText=this.engProjectList[this.engProjectIndex].text},changeCheckDate:function(t){this.checkDate=t.detail.value},selectRect:function(e){this.isfirstopen+=1,t.navigateTo({url:"../../../components/selectPeople"})},addDatas:function(){var e=this.dataList.length+1;if(!(e<11))return t.showToast({title:"最多添加10条"}),!1;this.dataList.push({dataNum:e}),e+=1},submit:function(){t.removeStorageSync("selectID"),t.removeStorageSync("selectName");var e=n.default.net.setUrl("api/ActualQuantityApi/Add"),a=[];for(var s in this.dataList)a.push(this.dataList[s].dataInput);console.log(a);var i={ProjectID:this.projectVal,CheckPeople:n.default.net.GetUser().ID,AccCheckProple:this.rectpeopleid,CheckDate:this.checkDate,Children:[{ActualQuantityAreaID:this.areaVal,DataAttr:a,Remark:"111",ComId:this.ConstructVal,ActualQuantityTermID:this.engProjectVal}]};t.request({url:e,method:"POST",header:{Token:this.testToken},data:JSON.stringify(i),success:function(e){n.default.net.showWrongTipsEx(e);var a=e.data;a.data;1==a.status?(t.showToast({title:"提交成功",mask:!1,duration:1500}),setTimeout(function(){t.navigateBack({delta:1})},2e3)):console.log(a.message)},fail:function(){console.log("实测实量提交失败")},complete:function(){}})}}}}).call(e,a(2).default)},87:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"content"},[a("view",{staticClass:"input-row"},[t._m(0),a("picker",{attrs:{value:t.projectIndex,range:t.projectList,"range-key":"text",eventid:"uDX-0"},on:{change:t.changeProject}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.projectText))])])],1),a("view",{staticClass:"input-row"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.projectNum,expression:"projectNum"}],attrs:{type:"text",value:"",placeholder:"请填写项目编号",eventid:"wn4-1"},domProps:{value:t.projectNum},on:{input:function(e){e.target.composing||(t.projectNum=e.target.value)}}})]),a("view",{staticClass:"input-row"},[t._m(2),a("input",{attrs:{type:"text",value:t.rectpeople,placeholder:"",eventid:"7UM-2"},on:{tap:t.selectRect}})]),a("view",{staticClass:"input-row"},[t._m(3),a("picker",{attrs:{mode:"date",value:t.checkDate,start:"2018-09-26",end:"2028-12-31",eventid:"8aj-3"},on:{change:t.changeCheckDate}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.checkDate))])])],1),a("view",{staticClass:"input-row"},[t._m(4),a("picker",{attrs:{value:t.areaIndex,range:t.areaList,"range-key":"text",eventid:"4bM-4"},on:{change:t.changeArea}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.areaText))])])],1),a("view",{staticClass:"input-row"},[t._m(5),a("picker",{attrs:{value:t.ConstructIndex,range:t.ConstructList,"range-key":"text",eventid:"4lT-5"},on:{change:t.changeConstruct}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.ConstructText))])])],1),a("view",{staticClass:"input-row"},[t._m(6),a("picker",{attrs:{value:t.engProjectIndex,range:t.engProjectList,"range-key":"text",eventid:"wMl-6"},on:{change:t.changeEngproject}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.engProjectText))])])],1),a("view",{staticClass:"input-row"},[t._m(7),a("view",{staticClass:"data-row"},[a("button",{attrs:{size:"mini",type:"default",eventid:"QOx-7"},on:{tap:t.addDatas}},[t._v("添加数据")])],1)]),t._l(t.dataList,function(e,s){return t.isAdd?a("block",{key:s},[t.isAdd?a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label"},[t._v("\n\t\t\t\t数据:"+t._s(e.dataNum)+"\n\t\t\t")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataInput,expression:"item.dataInput"}],attrs:{type:"text",placeholder:"请输入测量数据",eventid:"Abm-8-"+s},domProps:{value:e.dataInput},on:{input:function(t){t.target.composing||(e.dataInput=t.target.value)}}})]):t._e()]):t._e()}),a("view",{staticClass:"button-row"},[a("button",{attrs:{type:"primary",size:"mini",eventid:"YnA-9"},on:{tap:t.submit}},[t._v("提交")])],1)],2)};s._withStripped=!0;var i={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"http://xcbucket.oss-cn-beijing.aliyuncs.com/%E6%98%9F%E5%B1%82%E7%8E%B0%E5%9C%BA%E7%AE%A1%E7%90%86APP/img/Site/hnt/list1_icon2-03.png",mode:""}}),e("text",[this._v("项目名称:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),e("text",[this._v("项目编号:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),e("text",[this._v("陪同检查人:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-13.png",mode:""}}),e("text",[this._v("检查日期:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),e("text",[this._v("测量区域:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),e("text",[this._v("构件类别:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-01.png",mode:""}}),e("text",[this._v("主控项目:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-13.png",mode:""}}),e("text",[this._v("测量数据:")])])}]};e.a=i}},[83]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/index/site/Measuring.js.map
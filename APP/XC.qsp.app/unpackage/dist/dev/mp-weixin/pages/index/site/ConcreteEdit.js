require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([22],{242:function(t,e,a){"use strict";var i=n(a(1)),s=n(a(243));function n(t){return t&&t.__esModule?t:{default:t}}new i.default(s.default).$mount()},243:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(245),s=a.n(i),n=a(246),o=!1;var r=function(t){o||a(244)},c=a(0)(s.a,n.a,r,"data-v-4d38266d",null);c.options.__file="F:\\施工管理平台\\20181101\\XC.qsp.app\\pages\\index\\site\\ConcreteEdit.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] ConcreteEdit.vue: functional components are not supported with templates, they should use render functions."),e.default=c.exports},244:function(t,e){},245:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i,s=a(3),n=(i=s)&&i.__esModule?i:{default:i};e.default={onLoad:function(t){var e=t.index;this.editIndex=e,this.Token=n.default.net.GetSessionToken(),this.getProject(),this.initDate()},data:function(){return{projectList:[],projectIndex:0,projectVal:"",projectText:"",gradeList:[{value:"C15",text:"C15"},{value:"C20",text:"C20"},{value:"C25",text:"C25"},{value:"C30",text:"C30"},{value:"C35",text:"C35"},{value:"C40",text:"C40"},{value:"C45",text:"C45"},{value:"C50",text:"C50"},{value:"C55",text:"C55"},{value:"C60",text:"C60"}],grade:0,gradeVal:"",checkDate:"",ConcreteDate:"",ComponentList:[{value:0,text:"墙柱"},{value:1,text:"梁板"}],ComponentIndex:0,ComponentVal:"",TestState:"侧面",isAdd:!0,tapTimes:0,dataList:[],Floor:"",Temperature:"",editIndex:0,tempList:[]}},methods:{initDate:function(){var e=t.getStorageSync("ConcreteListOffLine");this.tempList=e;var a=e[this.editIndex];if(console.log(a),this.projectVal=a.ProjectID,this.projectIndex=a.ProjectIndex,this.Floor=a.Floor,this.grade=a.GradeIndex,this.gradeVal=a.GradeVal,this.TestState=a.TestState,this.ConcreteDate=a.ConcreteDate,this.checkDate=a.CheckDate,this.ComponentVal=a.ComponentVal,this.ComponentIndex=a.ComponentIndex,this.Temperature=a.Temperature,a.DetailCollection){var i=a.DetailCollection;for(var s in i)this.dataList.push({dataNum:i[s].Name,dataInput:i[s].DataAttr.join(" ")})}},getProject:function(){var e=this,a=n.default.net.setUrl("api/DropDownListApi/GetProject");t.request({url:a,method:"GET",header:{Token:this.Token},success:function(t){n.default.net.showWrongTipsEx(t);var a=t.data,i=a.data;i.unshift({value:"",text:"请选择项目"}),1==a.status?(e.projectList=e.setData(i),e.projectVal=e.projectList[e.projectIndex].value,e.projectText=e.projectList[e.projectIndex].text):console.log("项目获取失败"+a.status)},fail:function(t,e){console.log("项目数据请求失败"+t+e)},complete:function(){}})},addDatas:function(){var e=this.dataList.length+1;if(!(e<10))return console.log(this.dataList),t.showToast({icon:"none",title:"最多添加10条"}),!1;this.dataList.push({dataNum:e}),e+=1},changeCheckDate:function(t){this.checkDate=t.detail.value},changeConcreteDate:function(t){this.ConcreteDate=t.detail.value},changeComponent:function(t){this.ComponentIndex=t.detail.value,this.ComponentVal=this.ComponentList[this.ComponentIndex].text},changeGrade:function(t){this.grade=t.detail.value,this.gradeVal=this.gradeList[this.grade].text},changeProject:function(t){this.projectIndex=t.detail.value,this.projectVal=this.projectList[t.detail.value].value,this.projectText=this.projectList[this.projectIndex].text},setData:function(t){var e=[];return t.forEach(function(t){e.push({text:t.text,value:t.value})}),e},submit:function(){var e=this,a=n.default.net.setUrl("api/QualityConcreteBackApi/AddOrUpdate"),i=[];for(var s in this.dataList)i.push({Name:this.dataList[s].dataNum,DataAttr:this.dataList[s].dataInput.split(" ")});if(!this.projectVal)return n.default.net.showWrongTips("请选择项目"),!1;if(!this.Floor)return n.default.net.showWrongTips("请输入构件部位/楼层"),!1;if(!this.Temperature)return n.default.net.showWrongTips("请输入日平均温度"),!1;var o=new Date(this.ConcreteDate);if(new Date(this.checkDate).getTime()<o.getTime())return t.showModal({title:"提示",content:"检查日期不能比浇筑日期早",showCancel:!1}),!1;console.log(i);var r={ProjectID:this.projectVal,ProjectName:this.projectText,Grade:this.gradeVal,Floor:this.Floor,TestState:this.TestState,ConcreteDate:this.ConcreteDate,CheckDate:this.checkDate,ComponentType:this.ComponentVal,Temperature:this.Temperature,Remark:"",DetailCollection:i};console.log(r),t.request({url:a,method:"POST",header:{Token:this.Token},data:JSON.stringify(r),success:function(a){n.default.net.showWrongTipsEx(a);var i=a.data;i.data;1==i.status?(e.tempList.splice(e.editIndex,1),t.setStorageSync("ConcreteListOffLine",e.tempList),t.showToast({title:"提交成功",mask:!1,duration:1500}),setTimeout(function(){t.navigateBack({delta:1})},2e3)):(console.log(i.message),n.default.net.showWrongTips("请填写正确数据"))},fail:function(){console.log("实测实量提交失败")},complete:function(){}})},tempS:function(){console.log("暂存");var e=[];for(var a in this.dataList)e.push({Name:this.dataList[a].dataNum,DataAttr:this.dataList[a].dataInput.split(" ")});var i={ProjectID:this.projectVal,ProjectIndex:this.projectIndex,ProjectName:this.projectText,GradeIndex:this.grade,GradeVal:this.gradeVal,Floor:this.Floor,TestState:this.TestState,ConcreteDate:this.ConcreteDate,CheckDate:this.checkDate,ComponentVal:this.ComponentVal,ComponentIndex:this.ComponentIndex,Temperature:this.Temperature,DetailCollection:e};this.tempList[this.editIndex]=i,t.setStorageSync("ConcreteListOffLine",this.tempList),t.showToast({title:"暂存成功",mask:!1,duration:1500}),setTimeout(function(){t.navigateBack({delta:1})},2e3)}}}}).call(e,a(2).default)},246:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"content"},[a("view",{staticClass:"input-row"},[t._m(0),a("picker",{attrs:{value:t.projectIndex,range:t.projectList,"range-key":"text",eventid:"HeM-0"},on:{change:t.changeProject}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.projectText))])])],1),a("view",{staticClass:"input-row"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Floor,expression:"Floor"}],attrs:{type:"text",value:"",placeholder:"请填写测量部位(楼层)",eventid:"WQj-1"},domProps:{value:t.Floor},on:{input:function(e){e.target.composing||(t.Floor=e.target.value)}}})]),a("view",{staticClass:"input-row"},[t._m(2),a("picker",{attrs:{value:t.grade,range:t.gradeList,"range-key":"text",eventid:"cGs-2"},on:{change:t.changeGrade}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.gradeList[t.grade].text))])])],1),a("view",{staticClass:"input-row"},[t._m(3),a("picker",{attrs:{mode:"date",value:t.ConcreteDate,start:"2000-01-01",end:"2028-12-31",eventid:"oZO-3"},on:{change:t.changeConcreteDate}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.ConcreteDate))])])],1),a("view",{staticClass:"input-row"},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.TestState,expression:"TestState"}],attrs:{type:"text",value:t.TestState,placeholder:"",disabled:"disabled",eventid:"7Xc-4"},domProps:{value:t.TestState},on:{input:function(e){e.target.composing||(t.TestState=e.target.value)}}})]),a("view",{staticClass:"input-row"},[t._m(5),a("picker",{attrs:{value:t.ComponentIndex,range:t.ComponentList,"range-key":"text",eventid:"ewR-5"},on:{change:t.changeComponent}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.ComponentList[t.ComponentIndex].text))])])],1),a("view",{staticClass:"input-row"},[t._m(6),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Temperature,expression:"Temperature"}],attrs:{type:"number",value:"",placeholder:"请填写日平均温度",eventid:"rlx-6"},domProps:{value:t.Temperature},on:{input:function(e){e.target.composing||(t.Temperature=e.target.value)}}})]),a("view",{staticClass:"input-row"},[t._m(7),a("picker",{attrs:{mode:"date",value:t.checkDate,start:t.ConcreteDate,end:"2028-12-31",eventid:"wIx-7"},on:{change:t.changeCheckDate}},[a("view",{staticClass:"uni-input"},[t._v(t._s(t.checkDate))])])],1),a("view",{staticClass:"input-row"},[t._m(8),a("view",{staticClass:"data-row"},[a("button",{attrs:{size:"mini",type:"default",eventid:"vyX-8"},on:{tap:t.addDatas}},[t._v("添加数据")])],1)]),t._l(t.dataList,function(e,i){return t.isAdd?a("block",{key:i},[t.isAdd?a("view",{staticClass:"input-row"},[a("view",{staticClass:"input-label reduceWidth"},[t._v("\n\t\t\t\t数据:"+t._s(e.dataNum)+"\n\t\t\t")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataInput,expression:"item.dataInput"}],staticClass:"increaseWidth",attrs:{type:"text",placeholder:"请输入16条数据,空格隔开",eventid:"9c4-9-"+i},domProps:{value:e.dataInput},on:{input:function(t){t.target.composing||(e.dataInput=t.target.value)}}})]):t._e()]):t._e()}),a("view",{staticClass:"input-row-bottom-line"}),a("view",{staticClass:"button-row mt-20"},[a("button",{attrs:{type:"primary",size:"mini",eventid:"C8E-10"},on:{tap:t.submit}},[t._v("提交")]),a("button",{attrs:{type:"default",size:"mini",eventid:"Ppz-11"},on:{tap:t.tempS}},[t._v("暂存")])],1)],2)};i._withStripped=!0;var s={render:i,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-02.png",mode:""}}),e("text",[this._v("项目名称:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-02.png",mode:""}}),e("text",[this._v("构件部位(楼层):")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-10.png",mode:""}}),e("text",[this._v("混凝土强度设计等级:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-13.png",mode:""}}),e("text",[this._v("砼浇筑时间:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-11.png",mode:""}}),e("text",[this._v("测试面状态:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-05.png",mode:""}}),e("text",[this._v("构件类型:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-12.png",mode:""}}),e("text",[this._v("日平均温度:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list1_icon-13.png",mode:""}}),e("text",[this._v("检查日期:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-label"},[e("image",{attrs:{src:"../../../static/img/list1_icon/list2_icon-07.png",mode:""}}),e("text",[this._v("测量数据:")])])}]};e.a=s}},[242]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/index/site/ConcreteEdit.js.map